'use strict';window.DOMHandler=class{constructor(c,a){this._iRuntime=c;this._componentId=a;this._hasTickCallback=!1;this._tickCallback=()=>this.Tick()}Attach(){}PostToRuntime(c,a,b,d){this._iRuntime.PostToRuntimeComponent(this._componentId,c,a,b,d)}PostToRuntimeAsync(c,a,b,d){return this._iRuntime.PostToRuntimeComponentAsync(this._componentId,c,a,b,d)}_PostToRuntimeMaybeSync(c,a,b){this._iRuntime.UsesWorker()?this.PostToRuntime(c,a,b):this._iRuntime._GetLocalRuntime()._OnMessageFromDOM({type:"event",
component:this._componentId,handler:c,dispatchOpts:b||null,data:a,responseId:null})}AddRuntimeMessageHandler(c,a){this._iRuntime.AddRuntimeComponentMessageHandler(this._componentId,c,a)}AddRuntimeMessageHandlers(c){for(const [a,b]of c)this.AddRuntimeMessageHandler(a,b)}GetRuntimeInterface(){return this._iRuntime}GetComponentID(){return this._componentId}_StartTicking(){this._hasTickCallback||(this._iRuntime._AddRAFCallback(this._tickCallback),this._hasTickCallback=!0)}_StopTicking(){this._hasTickCallback&&
(this._iRuntime._RemoveRAFCallback(this._tickCallback),this._hasTickCallback=!1)}Tick(){}};
window.RateLimiter=class{constructor(c,a){this._callback=c;this._interval=a;this._timerId=-1;this._lastCallTime=-Infinity;this._timerCallFunc=()=>this._OnTimer();this._canRunImmediate=this._ignoreReset=!1}SetCanRunImmediate(c){this._canRunImmediate=!!c}Call(){if(-1===this._timerId){var c=Date.now(),a=c-this._lastCallTime,b=this._interval;a>=b&&this._canRunImmediate?(this._lastCallTime=c,this._RunCallback()):this._timerId=self.setTimeout(this._timerCallFunc,Math.max(b-a,4))}}_RunCallback(){this._ignoreReset=
!0;this._callback();this._ignoreReset=!1}Reset(){this._ignoreReset||(this._CancelTimer(),this._lastCallTime=Date.now())}_OnTimer(){this._timerId=-1;this._lastCallTime=Date.now();this._RunCallback()}_CancelTimer(){-1!==this._timerId&&(self.clearTimeout(this._timerId),this._timerId=-1)}Release(){this._CancelTimer();this._timerCallFunc=this._callback=null}};"use strict";
window.DOMElementHandler=class extends self.DOMHandler{constructor(c,a){super(c,a);this._elementMap=new Map;this._autoAttach=!0;this.AddRuntimeMessageHandlers([["create",b=>this._OnCreate(b)],["destroy",b=>this._OnDestroy(b)],["set-visible",b=>this._OnSetVisible(b)],["update-position",b=>this._OnUpdatePosition(b)],["update-state",b=>this._OnUpdateState(b)],["focus",b=>this._OnSetFocus(b)],["set-css-style",b=>this._OnSetCssStyle(b)],["set-attribute",b=>this._OnSetAttribute(b)],["remove-attribute",
b=>this._OnRemoveAttribute(b)]]);this.AddDOMElementMessageHandler("get-element",b=>b)}SetAutoAttach(c){this._autoAttach=!!c}AddDOMElementMessageHandler(c,a){this.AddRuntimeMessageHandler(c,b=>{const d=this._elementMap.get(b.elementId);return a(d,b)})}_OnCreate(c){const a=c.elementId,b=this.CreateElement(a,c);this._elementMap.set(a,b);b.style.boxSizing="border-box";c.isVisible||(b.style.display="none");c=this._GetFocusElement(b);c.addEventListener("focus",d=>this._OnFocus(a));c.addEventListener("blur",
d=>this._OnBlur(a));this._autoAttach&&document.body.appendChild(b)}CreateElement(c,a){throw Error("required override");}DestroyElement(c){}_OnDestroy(c){c=c.elementId;const a=this._elementMap.get(c);this.DestroyElement(a);this._autoAttach&&a.parentElement.removeChild(a);this._elementMap.delete(c)}PostToRuntimeElement(c,a,b){b||(b={});b.elementId=a;this.PostToRuntime(c,b)}_PostToRuntimeElementMaybeSync(c,a,b){b||(b={});b.elementId=a;this._PostToRuntimeMaybeSync(c,b)}_OnSetVisible(c){this._autoAttach&&
(this._elementMap.get(c.elementId).style.display=c.isVisible?"":"none")}_OnUpdatePosition(c){if(this._autoAttach){var a=this._elementMap.get(c.elementId);a.style.left=c.left+"px";a.style.top=c.top+"px";a.style.width=c.width+"px";a.style.height=c.height+"px";c=c.fontSize;null!==c&&(a.style.fontSize=c+"em")}}_OnUpdateState(c){const a=this._elementMap.get(c.elementId);this.UpdateState(a,c)}UpdateState(c,a){throw Error("required override");}_GetFocusElement(c){return c}_OnFocus(c){this.PostToRuntimeElement("elem-focused",
c)}_OnBlur(c){this.PostToRuntimeElement("elem-blurred",c)}_OnSetFocus(c){const a=this._GetFocusElement(this._elementMap.get(c.elementId));c.focus?a.focus():a.blur()}_OnSetCssStyle(c){this._elementMap.get(c.elementId).style[c.prop]=c.val}_OnSetAttribute(c){this._elementMap.get(c.elementId).setAttribute(c.name,c.val)}_OnRemoveAttribute(c){this._elementMap.get(c.elementId).removeAttribute(c.name)}GetElementById(c){return this._elementMap.get(c)}};"use strict";
{const c=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent),a=/android/i.test(navigator.userAgent);let b=0;function d(h){const e=document.createElement("script");e.async=!1;e.type="module";return h.isStringSrc?new Promise(k=>{const v="c3_resolve_"+b;++b;self[v]=k;e.textContent=h.str+`\n\nself["${v}"]();`;document.head.appendChild(e)}):new Promise((k,v)=>{e.onload=k;e.onerror=v;e.src=h;document.head.appendChild(e)})}let f=!1,u=!1;function x(){if(!f){try{new Worker("blob://",{get type(){u=
!0}})}catch(h){}f=!0}return u}let p=new Audio;const q={"audio/webm; codecs=opus":!!p.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!p.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!p.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!p.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!p.canPlayType("audio/mp4"),"audio/mpeg":!!p.canPlayType("audio/mpeg")};p=null;async function l(h){h=await z(h);return(new TextDecoder("utf-8")).decode(h)}
function z(h){return new Promise((e,k)=>{const v=new FileReader;v.onload=B=>e(B.target.result);v.onerror=B=>k(B);v.readAsArrayBuffer(h)})}const C=[];let A=0;window.RealFile=window.File;const r=[],n=new Map,m=new Map;let t=0;const w=[];self.runOnStartup=function(h){if("function"!==typeof h)throw Error("runOnStartup called without a function");w.push(h)};const y=new Set(["cordova","playable-ad","instant-games"]);function G(h){return y.has(h)}let g=!1;window.RuntimeInterface=class h{constructor(e){this._useWorker=
e.useWorker;this._messageChannelPort=null;this._runtimeBaseUrl="";this._scriptFolder=e.scriptFolder;this._workerScriptURLs={};this._localRuntime=this._worker=null;this._domHandlers=[];this._canvas=this._runtimeDomHandler=null;this._isExportingToVideo=!1;this._exportToVideoDuration=0;this._jobScheduler=null;this._rafId=-1;this._rafFunc=()=>this._OnRAFCallback();this._rafCallbacks=[];this._exportType=e.exportType;this._isFileProtocol="file"===location.protocol.substr(0,4);!this._useWorker||"undefined"!==
typeof OffscreenCanvas&&navigator.userActivation&&x()||(this._useWorker=!1);if("playable-ad"===this._exportType||"instant-games"===this._exportType)this._useWorker=!1;if("cordova"===this._exportType&&this._useWorker)if(a){const k=/Chrome\/(\d+)/i.exec(navigator.userAgent);k&&90<=parseInt(k[1],10)||(this._useWorker=!1)}else this._useWorker=!1;this._localFileStrings=this._localFileBlobs=null;"html5"!==this._exportType&&"playable-ad"!==this._exportType||!this._isFileProtocol||alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");
"html5"!==this._exportType||window.isSecureContext||console.warn("[Construct 3] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available.");this.AddRuntimeComponentMessageHandler("runtime","cordova-fetch-local-file",k=>this._OnCordovaFetchLocalFile(k));this.AddRuntimeComponentMessageHandler("runtime","create-job-worker",k=>this._OnCreateJobWorker(k));"cordova"===this._exportType?document.addEventListener("deviceready",
()=>this._Init(e)):this._Init(e)}Release(){this._CancelAnimationFrame();this._messageChannelPort&&(this._messageChannelPort=this._messageChannelPort.onmessage=null);this._worker&&(this._worker.terminate(),this._worker=null);this._localRuntime&&(this._localRuntime.Release(),this._localRuntime=null);this._canvas&&(this._canvas.parentElement.removeChild(this._canvas),this._canvas=null)}GetCanvas(){return this._canvas}GetRuntimeBaseURL(){return this._runtimeBaseUrl}UsesWorker(){return this._useWorker}GetExportType(){return this._exportType}IsFileProtocol(){return this._isFileProtocol}GetScriptFolder(){return this._scriptFolder}IsiOSCordova(){return c&&
"cordova"===this._exportType}IsiOSWebView(){const e=navigator.userAgent;return c&&G(this._exportType)||navigator.standalone||/crios\/|fxios\/|edgios\//i.test(e)}IsAndroid(){return a}IsAndroidWebView(){return a&&G(this._exportType)}async _Init(e){"macos-wkwebview"===this._exportType&&this._SendWrapperMessage({type:"ready"});if("playable-ad"===this._exportType){this._localFileBlobs=self.c3_base64files;this._localFileStrings={};await this._ConvertDataUrisToBlobs();for(let v=0,B=e.engineScripts.length;v<
B;++v){var k=e.engineScripts[v].toLowerCase();this._localFileStrings.hasOwnProperty(k)?e.engineScripts[v]={isStringSrc:!0,str:this._localFileStrings[k]}:this._localFileBlobs.hasOwnProperty(k)&&(e.engineScripts[v]=URL.createObjectURL(this._localFileBlobs[k]))}}e.runtimeBaseUrl?this._runtimeBaseUrl=e.runtimeBaseUrl:(k=location.origin,this._runtimeBaseUrl=("null"===k?"file:///":k)+location.pathname,k=this._runtimeBaseUrl.lastIndexOf("/"),-1!==k&&(this._runtimeBaseUrl=this._runtimeBaseUrl.substr(0,k+
1)));e.workerScripts&&(this._workerScriptURLs=e.workerScripts);k=new MessageChannel;this._messageChannelPort=k.port1;this._messageChannelPort.onmessage=v=>this._OnMessageFromRuntime(v.data);window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(v=>this._OnMessageFromDebugger(v));this._jobScheduler=new self.JobSchedulerDOM(this);await this._jobScheduler.Init();"object"===typeof window.StatusBar&&window.StatusBar.hide();if("object"===typeof window.AndroidFullScreen)try{await new Promise((v,
B)=>{window.AndroidFullScreen.immersiveMode(v,B)})}catch(v){console.error("Failed to enter Android immersive mode: ",v)}this._useWorker?await this._InitWorker(e,k.port2):await this._InitDOM(e,k.port2)}_GetWorkerURL(e){e=this._workerScriptURLs.hasOwnProperty(e)?this._workerScriptURLs[e]:e.endsWith("/workermain.js")&&this._workerScriptURLs.hasOwnProperty("workermain.js")?this._workerScriptURLs["workermain.js"]:"playable-ad"===this._exportType&&this._localFileBlobs.hasOwnProperty(e.toLowerCase())?this._localFileBlobs[e.toLowerCase()]:
e;e instanceof Blob&&(e=URL.createObjectURL(e));return e}async CreateWorker(e,k,v){if(e.startsWith("blob:"))return new Worker(e,v);if("cordova"===this._exportType&&this._isFileProtocol)return e=await this.CordovaFetchLocalFileAsArrayBuffer(v.isC3MainWorker?e:this._scriptFolder+e),e=new Blob([e],{type:"application/javascript"}),new Worker(URL.createObjectURL(e),v);e=new URL(e,k);if(location.origin!==e.origin){e=await fetch(e);if(!e.ok)throw Error("failed to fetch worker script");e=await e.blob();return new Worker(URL.createObjectURL(e),
v)}return new Worker(e,v)}_GetWindowInnerWidth(){return Math.max(window.innerWidth,1)}_GetWindowInnerHeight(){return Math.max(window.innerHeight,1)}_GetCommonRuntimeOptions(e){return{runtimeBaseUrl:this._runtimeBaseUrl,previewUrl:location.href,windowInnerWidth:this._GetWindowInnerWidth(),windowInnerHeight:this._GetWindowInnerHeight(),devicePixelRatio:window.devicePixelRatio,isFullscreen:h.IsDocumentFullscreen(),projectData:e.projectData,previewImageBlobs:window.cr_previewImageBlobs||this._localFileBlobs,
previewProjectFileBlobs:window.cr_previewProjectFileBlobs,previewProjectFileSWUrls:window.cr_previewProjectFiles,swClientId:window.cr_swClientId||"",exportType:e.exportType,isDebug:(new URLSearchParams(self.location.search)).has("debug"),ife:!!self.ife,jobScheduler:this._jobScheduler.GetPortData(),supportedAudioFormats:q,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this._scriptFolder+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this._scriptFolder+"opus.wasm.wasm",isFileProtocol:this._isFileProtocol,
isiOSCordova:this.IsiOSCordova(),isiOSWebView:this.IsiOSWebView(),isFBInstantAvailable:"undefined"!==typeof self.FBInstant}}async _InitWorker(e,k){var v=this._GetWorkerURL(e.workerMainUrl);this._worker=await this.CreateWorker(v,this._runtimeBaseUrl,{type:"module",name:"Runtime",isC3MainWorker:!0});this._canvas=document.createElement("canvas");this._canvas.style.display="none";v=this._canvas.transferControlToOffscreen();document.body.appendChild(this._canvas);window.c3canvas=this._canvas;self.C3_InsertHTMLPlaceholders&&
self.C3_InsertHTMLPlaceholders();let B=e.workerDependencyScripts||[],E=e.engineScripts;B=await Promise.all(B.map(D=>this._MaybeGetCordovaScriptURL(D)));E=await Promise.all(E.map(D=>this._MaybeGetCordovaScriptURL(D)));if("cordova"===this._exportType)for(let D=0,F=e.projectScripts.length;D<F;++D){const H=e.projectScripts[D],I=H[0];if(I===e.mainProjectScript||"scriptsInEvents.js"===I||I.endsWith("/scriptsInEvents.js"))H[1]=await this._MaybeGetCordovaScriptURL(I)}this._worker.postMessage(Object.assign(this._GetCommonRuntimeOptions(e),
{type:"init-runtime",isInWorker:!0,messagePort:k,canvas:v,workerDependencyScripts:B,engineScripts:E,projectScripts:e.projectScripts,mainProjectScript:e.mainProjectScript,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[k,v,...this._jobScheduler.GetPortTransferables()]);this._domHandlers=r.map(D=>new D(this));this._FindRuntimeDOMHandler();self.c3_callFunction=(D,F)=>this._runtimeDomHandler._InvokeFunctionFromJS(D,F);"preview"===this._exportType&&(self.goToLastErrorScript=()=>this.PostToRuntimeComponent("runtime",
"go-to-last-error-script"))}async _InitDOM(e,k){this._canvas=document.createElement("canvas");this._canvas.style.display="none";document.body.appendChild(this._canvas);window.c3canvas=this._canvas;self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders();this._domHandlers=r.map(D=>new D(this));this._FindRuntimeDOMHandler();var v=e.engineScripts.map(D=>"string"===typeof D?(new URL(D,this._runtimeBaseUrl)).toString():D);Array.isArray(e.workerDependencyScripts)&&v.unshift(...e.workerDependencyScripts);
v=await Promise.all(v.map(D=>this._MaybeGetCordovaScriptURL(D)));await Promise.all(v.map(D=>d(D)));v=self.C3_ProjectScriptsStatus;const B=e.mainProjectScript,E=e.projectScripts;for(let [D,F]of E)if(F||(F=D),D===B)try{F=await this._MaybeGetCordovaScriptURL(F),await d(F),"preview"!==this._exportType||v[D]||this._ReportProjectMainScriptError(D,"main script did not run to completion")}catch(H){this._ReportProjectMainScriptError(D,H)}else if("scriptsInEvents.js"===D||D.endsWith("/scriptsInEvents.js"))F=
await this._MaybeGetCordovaScriptURL(F),await d(F);"preview"===this._exportType&&"object"!==typeof self.C3.ScriptsInEvents?(this._RemoveLoadingMessage(),console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(e=Object.assign(this._GetCommonRuntimeOptions(e),{isInWorker:!1,messagePort:k,canvas:this._canvas,runOnStartupFunctions:w}),
this._OnBeforeCreateRuntime(),this._localRuntime=self.C3_CreateRuntime(e),await self.C3_InitRuntime(this._localRuntime,e))}_ReportProjectMainScriptError(e,k){this._RemoveLoadingMessage();console.error(`[Preview] Failed to load project main script (${e}): `,k);alert(`Failed to load project main script (${e}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`)}_OnBeforeCreateRuntime(){this._RemoveLoadingMessage()}_RemoveLoadingMessage(){const e=window.cr_previewLoadingElem;
e&&(e.parentElement.removeChild(e),window.cr_previewLoadingElem=null)}async _OnCreateJobWorker(e){e=await this._jobScheduler._CreateJobWorker();return{outputPort:e,transferables:[e]}}_GetLocalRuntime(){if(this._useWorker)throw Error("not available in worker mode");return this._localRuntime}PostToRuntimeComponent(e,k,v,B,E){this._messageChannelPort.postMessage({type:"event",component:e,handler:k,dispatchOpts:B||null,data:v,responseId:null},E)}PostToRuntimeComponentAsync(e,k,v,B,E){const D=t++,F=new Promise((H,
I)=>{m.set(D,{resolve:H,reject:I})});this._messageChannelPort.postMessage({type:"event",component:e,handler:k,dispatchOpts:B||null,data:v,responseId:D},E);return F}["_OnMessageFromRuntime"](e){const k=e.type;if("event"===k)return this._OnEventFromRuntime(e);if("result"===k)this._OnResultFromRuntime(e);else if("runtime-ready"===k)this._OnRuntimeReady();else if("alert-error"===k)this._RemoveLoadingMessage(),alert(e.message);else if("creating-runtime"===k)this._OnBeforeCreateRuntime();else throw Error(`unknown message '${k}'`);
}_OnEventFromRuntime(e){const k=e.component,v=e.handler,B=e.data,E=e.responseId;if(e=n.get(k))if(e=e.get(v)){var D=null;try{D=e(B)}catch(F){console.error(`Exception in '${k}' handler '${v}':`,F);null!==E&&this._PostResultToRuntime(E,!1,""+F);return}if(null===E)return D;D&&D.then?D.then(F=>this._PostResultToRuntime(E,!0,F)).catch(F=>{console.error(`Rejection from '${k}' handler '${v}':`,F);this._PostResultToRuntime(E,!1,""+F)}):this._PostResultToRuntime(E,!0,D)}else console.warn(`[DOM] No handler '${v}' for component '${k}'`);
else console.warn(`[DOM] No event handlers for component '${k}'`)}_PostResultToRuntime(e,k,v){let B;v&&v.transferables&&(B=v.transferables);this._messageChannelPort.postMessage({type:"result",responseId:e,isOk:k,result:v},B)}_OnResultFromRuntime(e){const k=e.responseId,v=e.isOk;e=e.result;const B=m.get(k);v?B.resolve(e):B.reject(e);m.delete(k)}AddRuntimeComponentMessageHandler(e,k,v){let B=n.get(e);B||(B=new Map,n.set(e,B));if(B.has(k))throw Error(`[DOM] Component '${e}' already has handler '${k}'`);
B.set(k,v)}static AddDOMHandlerClass(e){if(r.includes(e))throw Error("DOM handler already added");r.push(e)}_FindRuntimeDOMHandler(){for(const e of this._domHandlers)if("runtime"===e.GetComponentID()){this._runtimeDomHandler=e;return}throw Error("cannot find runtime DOM handler");}_OnMessageFromDebugger(e){this.PostToRuntimeComponent("debugger","message",e)}_OnRuntimeReady(){for(const e of this._domHandlers)e.Attach()}static IsDocumentFullscreen(){return!!(document.fullscreenElement||document.webkitFullscreenElement||
document.mozFullScreenElement||g)}static _SetWrapperIsFullscreenFlag(e){g=!!e}async GetRemotePreviewStatusInfo(){return await this.PostToRuntimeComponentAsync("runtime","get-remote-preview-status-info")}_AddRAFCallback(e){this._rafCallbacks.push(e);this._RequestAnimationFrame()}_RemoveRAFCallback(e){e=this._rafCallbacks.indexOf(e);if(-1===e)throw Error("invalid callback");this._rafCallbacks.splice(e,1);this._rafCallbacks.length||this._CancelAnimationFrame()}_RequestAnimationFrame(){-1===this._rafId&&
this._rafCallbacks.length&&(this._rafId=requestAnimationFrame(this._rafFunc))}_CancelAnimationFrame(){-1!==this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=-1)}_OnRAFCallback(){this._rafId=-1;for(const e of this._rafCallbacks)e();this._RequestAnimationFrame()}TryPlayMedia(e){this._runtimeDomHandler.TryPlayMedia(e)}RemovePendingPlay(e){this._runtimeDomHandler.RemovePendingPlay(e)}_PlayPendingMedia(){this._runtimeDomHandler._PlayPendingMedia()}SetSilent(e){this._runtimeDomHandler.SetSilent(e)}IsAudioFormatSupported(e){return!!q[e]}async _WasmDecodeWebMOpus(e){e=
await this.PostToRuntimeComponentAsync("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(e)}SetIsExportingToVideo(e){this._isExportingToVideo=!0;this._exportToVideoDuration=e}IsExportingToVideo(){return this._isExportingToVideo}GetExportToVideoDuration(){return this._exportToVideoDuration}IsAbsoluteURL(e){return/^(?:[a-z\-]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}IsRelativeURL(e){return!this.IsAbsoluteURL(e)}async _MaybeGetCordovaScriptURL(e){return"cordova"===
this._exportType&&(e.startsWith("file:")||this._isFileProtocol&&this.IsRelativeURL(e))?(e.startsWith(this._runtimeBaseUrl)&&(e=e.substr(this._runtimeBaseUrl.length)),e=await this.CordovaFetchLocalFileAsArrayBuffer(e),e=new Blob([e],{type:"application/javascript"}),URL.createObjectURL(e)):e}async _OnCordovaFetchLocalFile(e){const k=e.filename;switch(e.as){case "text":return await this.CordovaFetchLocalFileAsText(k);case "buffer":return await this.CordovaFetchLocalFileAsArrayBuffer(k);default:throw Error("unsupported type");
}}_GetPermissionAPI(){const e=window.cordova&&window.cordova.plugins&&window.cordova.plugins.permissions;if("object"!==typeof e)throw Error("Permission API is not loaded");return e}_MapPermissionID(e,k){e=e[k];if("string"!==typeof e)throw Error("Invalid permission name");return e}_HasPermission(e){const k=this._GetPermissionAPI();return new Promise((v,B)=>k.checkPermission(this._MapPermissionID(k,e),E=>v(!!E.hasPermission),B))}_RequestPermission(e){const k=this._GetPermissionAPI();return new Promise((v,
B)=>k.requestPermission(this._MapPermissionID(k,e),E=>v(!!E.hasPermission),B))}async RequestPermissions(e){if("cordova"!==this.GetExportType()||this.IsiOSCordova())return!0;for(const k of e)if(!await this._HasPermission(k)&&!1===await this._RequestPermission(k))return!1;return!0}async RequirePermissions(...e){if(!1===await this.RequestPermissions(e))throw Error("Permission not granted");}CordovaFetchLocalFile(e){const k=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((v,
B)=>{window.resolveLocalFileSystemURL(k,E=>{E.file(v,B)},B)})}async CordovaFetchLocalFileAsText(e){e=await this.CordovaFetchLocalFile(e);return await l(e)}_CordovaMaybeStartNextArrayBufferRead(){if(C.length&&!(8<=A)){A++;var e=C.shift();this._CordovaDoFetchLocalFileAsAsArrayBuffer(e.filename,e.successCallback,e.errorCallback)}}CordovaFetchLocalFileAsArrayBuffer(e){return new Promise((k,v)=>{C.push({filename:e,successCallback:B=>{A--;this._CordovaMaybeStartNextArrayBufferRead();k(B)},errorCallback:B=>
{A--;this._CordovaMaybeStartNextArrayBufferRead();v(B)}});this._CordovaMaybeStartNextArrayBufferRead()})}async _CordovaDoFetchLocalFileAsAsArrayBuffer(e,k,v){try{const B=await this.CordovaFetchLocalFile(e),E=await z(B);k(E)}catch(B){v(B)}}_SendWrapperMessage(e){if("windows-webview2"===this._exportType)window.chrome.webview.postMessage(JSON.stringify(e));else if("macos-wkwebview"===this._exportType)window.webkit.messageHandlers.C3Wrapper.postMessage(JSON.stringify(e));else throw Error("cannot send wrapper message");
}async _ConvertDataUrisToBlobs(){const e=[];for(const [k,v]of Object.entries(this._localFileBlobs))e.push(this._ConvertDataUriToBlobs(k,v));await Promise.all(e)}async _ConvertDataUriToBlobs(e,k){if("object"===typeof k)this._localFileBlobs[e]=new Blob([k.str],{type:k.type}),this._localFileStrings[e]=k.str;else{let v=await this._FetchDataUri(k);v||(v=this._DataURIToBinaryBlobSync(k));this._localFileBlobs[e]=v}}async _FetchDataUri(e){try{return await (await fetch(e)).blob()}catch(k){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",
k),null}}_DataURIToBinaryBlobSync(e){e=this._ParseDataURI(e);return this._BinaryStringToBlob(e.data,e.mime_type)}_ParseDataURI(e){var k=e.indexOf(",");if(0>k)throw new URIError("expected comma in data: uri");var v=e.substring(5,k);e=e.substring(k+1);k=v.split(";");v=k[0]||"";const B=k[2];e="base64"===k[1]||"base64"===B?atob(e):decodeURIComponent(e);return{mime_type:v,data:e}}_BinaryStringToBlob(e,k){var v=e.length;let B=v>>2,E=new Uint8Array(v),D=new Uint32Array(E.buffer,0,B),F,H;for(H=F=0;F<B;++F)D[F]=
e.charCodeAt(H++)|e.charCodeAt(H++)<<8|e.charCodeAt(H++)<<16|e.charCodeAt(H++)<<24;for(v&=3;v--;)E[H]=e.charCodeAt(H),++H;return new Blob([E],{type:k})}}}"use strict";
{const c=self.RuntimeInterface;function a(g){return g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||g.originalEvent&&g.originalEvent.sourceCapabilities&&g.originalEvent.sourceCapabilities.firesTouchEvents}const b=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),d={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},f={dispatchUserScriptEvent:!0},u={dispatchRuntimeEvent:!0};function x(g){return new Promise((h,e)=>{const k=document.createElement("link");k.onload=()=>h(k);k.onerror=
v=>e(v);k.rel="stylesheet";k.href=g;document.head.appendChild(k)})}function p(g){return new Promise((h,e)=>{const k=new Image;k.onload=()=>h(k);k.onerror=v=>e(v);k.src=g})}async function q(g){g=URL.createObjectURL(g);try{return await p(g)}finally{URL.revokeObjectURL(g)}}function l(g){return new Promise((h,e)=>{let k=new FileReader;k.onload=v=>h(v.target.result);k.onerror=v=>e(v);k.readAsText(g)})}async function z(g,h,e){if(!/firefox/i.test(navigator.userAgent))return await q(g);var k=await l(g);k=
(new DOMParser).parseFromString(k,"image/svg+xml");const v=k.documentElement;if(v.hasAttribute("width")&&v.hasAttribute("height")){const B=v.getAttribute("width"),E=v.getAttribute("height");if(!B.includes("%")&&!E.includes("%"))return await q(g)}v.setAttribute("width",h+"px");v.setAttribute("height",e+"px");k=(new XMLSerializer).serializeToString(k);g=new Blob([k],{type:"image/svg+xml"});return await q(g)}function C(g){do{if(g.parentNode&&g.hasAttribute("contenteditable"))return!0;g=g.parentNode}while(g);
return!1}const A=new Set(["input","textarea","datalist","select"]);function r(g){return A.has(g.tagName.toLowerCase())||C(g)}const n=new Set(["canvas","body","html"]);function m(g){const h=g.target.tagName.toLowerCase();n.has(h)&&g.preventDefault()}function t(g){(g.metaKey||g.ctrlKey)&&g.preventDefault()}self.C3_GetSvgImageSize=async function(g){g=await q(g);if(0<g.width&&0<g.height)return[g.width,g.height];{g.style.position="absolute";g.style.left="0px";g.style.top="0px";g.style.visibility="hidden";
document.body.appendChild(g);const h=g.getBoundingClientRect();document.body.removeChild(g);return[h.width,h.height]}};self.C3_RasterSvgImageBlob=async function(g,h,e,k,v){g=await z(g,h,e);const B=document.createElement("canvas");B.width=k;B.height=v;B.getContext("2d").drawImage(g,0,0,h,e);return B};let w=!1;document.addEventListener("pause",()=>w=!0);document.addEventListener("resume",()=>w=!1);function y(){try{return window.parent&&window.parent.document.hasFocus()}catch(g){return!1}}function G(){const g=
document.activeElement;if(!g)return!1;const h=g.tagName.toLowerCase(),e=new Set("email number password search tel text url".split(" "));return"textarea"===h?!0:"input"===h?e.has(g.type.toLowerCase()||"text"):C(g)}c.AddDOMHandlerClass(class extends self.DOMHandler{constructor(g){super(g,"runtime");this._isFirstSizeUpdate=!0;this._simulatedResizeTimerId=-1;this._targetOrientation="any";this._attachedDeviceMotionEvent=this._attachedDeviceOrientationEvent=!1;this._debugHighlightElem=null;this._isExportToVideo=
!1;this._exportVideoProgressMessage="";this._exportVideoUpdateTimerId=-1;this._lastPointerRawUpdateEvent=this._pointerRawUpdateRateLimiter=null;this._pointerRawMovementY=this._pointerRawMovementX=0;this._enableAndroidVKDetection=!1;this._lastWindowWidth=g._GetWindowInnerWidth();this._lastWindowHeight=g._GetWindowInnerHeight();this._virtualKeyboardHeight=0;g.AddRuntimeComponentMessageHandler("canvas","update-size",k=>this._OnUpdateCanvasSize(k));g.AddRuntimeComponentMessageHandler("runtime","invoke-download",
k=>this._OnInvokeDownload(k));g.AddRuntimeComponentMessageHandler("runtime","raster-svg-image",k=>this._OnRasterSvgImage(k));g.AddRuntimeComponentMessageHandler("runtime","get-svg-image-size",k=>this._OnGetSvgImageSize(k));g.AddRuntimeComponentMessageHandler("runtime","set-target-orientation",k=>this._OnSetTargetOrientation(k));g.AddRuntimeComponentMessageHandler("runtime","register-sw",()=>this._OnRegisterSW());g.AddRuntimeComponentMessageHandler("runtime","post-to-debugger",k=>this._OnPostToDebugger(k));
g.AddRuntimeComponentMessageHandler("runtime","go-to-script",k=>this._OnPostToDebugger(k));g.AddRuntimeComponentMessageHandler("runtime","before-start-ticking",()=>this._OnBeforeStartTicking());g.AddRuntimeComponentMessageHandler("runtime","debug-highlight",k=>this._OnDebugHighlight(k));g.AddRuntimeComponentMessageHandler("runtime","enable-device-orientation",()=>this._AttachDeviceOrientationEvent());g.AddRuntimeComponentMessageHandler("runtime","enable-device-motion",()=>this._AttachDeviceMotionEvent());
g.AddRuntimeComponentMessageHandler("runtime","add-stylesheet",k=>this._OnAddStylesheet(k));g.AddRuntimeComponentMessageHandler("runtime","alert",k=>this._OnAlert(k));g.AddRuntimeComponentMessageHandler("runtime","hide-cordova-splash",()=>this._OnHideCordovaSplash());g.AddRuntimeComponentMessageHandler("runtime","set-exporting-to-video",k=>this._SetExportingToVideo(k));g.AddRuntimeComponentMessageHandler("runtime","export-to-video-progress",k=>this._OnExportVideoProgress(k));g.AddRuntimeComponentMessageHandler("runtime",
"exported-to-video",k=>this._OnExportedToVideo(k));const h=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",k=>{const v=k.target,B=v.tagName.toLowerCase();h.has(B)||C(v)||k.preventDefault()});const e=g.GetCanvas();window.addEventListener("selectstart",m);window.addEventListener("gesturehold",m);e.addEventListener("selectstart",m);e.addEventListener("gesturehold",m);window.addEventListener("touchstart",m,{passive:!1});"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",
m,{passive:!1}),e.addEventListener("pointerdown",m)):e.addEventListener("touchstart",m);this._mousePointerLastButtons=0;window.addEventListener("mousedown",k=>{1===k.button&&k.preventDefault()});window.addEventListener("mousewheel",t,{passive:!1});window.addEventListener("wheel",t,{passive:!1});window.addEventListener("resize",()=>this._OnWindowResize());window.addEventListener("fullscreenchange",()=>this._OnFullscreenChange());window.addEventListener("webkitfullscreenchange",()=>this._OnFullscreenChange());
window.addEventListener("mozfullscreenchange",()=>this._OnFullscreenChange());window.addEventListener("fullscreenerror",k=>this._OnFullscreenError(k));window.addEventListener("webkitfullscreenerror",k=>this._OnFullscreenError(k));window.addEventListener("mozfullscreenerror",k=>this._OnFullscreenError(k));if(g.IsiOSWebView())if(window.visualViewport){let k=Infinity;window.visualViewport.addEventListener("resize",()=>{const v=window.visualViewport.height;v>k&&(document.scrollingElement.scrollTop=0);
k=v})}else window.addEventListener("focusout",()=>{G()||(document.scrollingElement.scrollTop=0)});self.C3WrapperOnMessage=k=>this._OnWrapperMessage(k);this._mediaPendingPlay=new Set;this._mediaRemovedPendingPlay=new WeakSet;this._isSilent=!1}_OnBeforeStartTicking(){self.setTimeout(()=>{this._enableAndroidVKDetection=!0},1E3);"cordova"===this._iRuntime.GetExportType()?(document.addEventListener("pause",()=>this._OnVisibilityChange(!0)),document.addEventListener("resume",()=>this._OnVisibilityChange(!1))):
document.addEventListener("visibilitychange",()=>this._OnVisibilityChange(document.hidden));return{isSuspended:!(!document.hidden&&!w)}}Attach(){window.addEventListener("focus",()=>this._PostRuntimeEvent("window-focus"));window.addEventListener("blur",()=>{this._PostRuntimeEvent("window-blur",{parentHasFocus:y()});this._mousePointerLastButtons=0});window.addEventListener("focusin",h=>{r(h.target)&&this._PostRuntimeEvent("keyboard-blur")});window.addEventListener("keydown",h=>this._OnKeyEvent("keydown",
h));window.addEventListener("keyup",h=>this._OnKeyEvent("keyup",h));window.addEventListener("dblclick",h=>this._OnMouseEvent("dblclick",h,d));window.addEventListener("wheel",h=>this._OnMouseWheelEvent("wheel",h));"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",h=>{this._HandlePointerDownFocus(h);this._OnPointerEvent("pointerdown",h)}),this._iRuntime.UsesWorker()&&"undefined"!==typeof window.onpointerrawupdate&&self===self.top?(this._pointerRawUpdateRateLimiter=new self.RateLimiter(()=>
this._DoSendPointerRawUpdate(),5),this._pointerRawUpdateRateLimiter.SetCanRunImmediate(!0),window.addEventListener("pointerrawupdate",h=>this._OnPointerRawUpdate(h))):window.addEventListener("pointermove",h=>this._OnPointerEvent("pointermove",h)),window.addEventListener("pointerup",h=>this._OnPointerEvent("pointerup",h)),window.addEventListener("pointercancel",h=>this._OnPointerEvent("pointercancel",h))):(window.addEventListener("mousedown",h=>{this._HandlePointerDownFocus(h);this._OnMouseEventAsPointer("pointerdown",
h)}),window.addEventListener("mousemove",h=>this._OnMouseEventAsPointer("pointermove",h)),window.addEventListener("mouseup",h=>this._OnMouseEventAsPointer("pointerup",h)),window.addEventListener("touchstart",h=>{this._HandlePointerDownFocus(h);this._OnTouchEvent("pointerdown",h)}),window.addEventListener("touchmove",h=>this._OnTouchEvent("pointermove",h)),window.addEventListener("touchend",h=>this._OnTouchEvent("pointerup",h)),window.addEventListener("touchcancel",h=>this._OnTouchEvent("pointercancel",
h)));const g=()=>this._PlayPendingMedia();window.addEventListener("pointerup",g,!0);window.addEventListener("touchend",g,!0);window.addEventListener("click",g,!0);window.addEventListener("keydown",g,!0);window.addEventListener("gamepadconnected",g,!0);this._iRuntime.IsAndroid()&&!this._iRuntime.IsAndroidWebView()&&navigator.virtualKeyboard&&(navigator.virtualKeyboard.overlaysContent=!0,navigator.virtualKeyboard.addEventListener("geometrychange",()=>{this._OnAndroidVirtualKeyboardChange(this._GetWindowInnerHeight(),
navigator.virtualKeyboard.boundingRect.height)}))}_OnAndroidVirtualKeyboardChange(g,h){document.body.style.transform="";if(0<h){var e=document.activeElement;e&&(e=e.getBoundingClientRect(),g=(e.top+e.bottom)/2-(g-h)/2,g>h&&(g=h),0>g&&(g=0),0<g&&(document.body.style.transform=`translateY(${-g}px)`))}}_PostRuntimeEvent(g,h){this.PostToRuntime(g,h||null,u)}_GetWindowInnerWidth(){return this._iRuntime._GetWindowInnerWidth()}_GetWindowInnerHeight(){return this._iRuntime._GetWindowInnerHeight()}_OnWindowResize(){if(!this._isExportToVideo){var g=
this._GetWindowInnerWidth(),h=this._GetWindowInnerHeight();if(this._iRuntime.IsAndroidWebView()){if(this._enableAndroidVKDetection){if(this._lastWindowWidth===g&&h<this._lastWindowHeight){this._virtualKeyboardHeight=this._lastWindowHeight-h;this._OnAndroidVirtualKeyboardChange(this._lastWindowHeight,this._virtualKeyboardHeight);return}0<this._virtualKeyboardHeight&&(this._virtualKeyboardHeight=0,this._OnAndroidVirtualKeyboardChange(h,this._virtualKeyboardHeight))}this._lastWindowWidth=g;this._lastWindowHeight=
h}this._PostRuntimeEvent("window-resize",{innerWidth:g,innerHeight:h,devicePixelRatio:window.devicePixelRatio,isFullscreen:c.IsDocumentFullscreen()});this._iRuntime.IsiOSWebView()&&(-1!==this._simulatedResizeTimerId&&clearTimeout(this._simulatedResizeTimerId),this._OnSimulatedResize(g,h,0))}}_ScheduleSimulatedResize(g,h,e){-1!==this._simulatedResizeTimerId&&clearTimeout(this._simulatedResizeTimerId);this._simulatedResizeTimerId=setTimeout(()=>this._OnSimulatedResize(g,h,e),48)}_OnSimulatedResize(g,
h,e){const k=this._GetWindowInnerWidth(),v=this._GetWindowInnerHeight();this._simulatedResizeTimerId=-1;k!=g||v!=h?this._PostRuntimeEvent("window-resize",{innerWidth:k,innerHeight:v,devicePixelRatio:window.devicePixelRatio,isFullscreen:c.IsDocumentFullscreen()}):10>e&&this._ScheduleSimulatedResize(k,v,e+1)}_OnSetTargetOrientation(g){this._targetOrientation=g.targetOrientation}_TrySetTargetOrientation(){const g=this._targetOrientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(g).catch(h=>
console.warn("[Construct 3] Failed to lock orientation: ",h));else try{let h=!1;screen.lockOrientation?h=screen.lockOrientation(g):screen.webkitLockOrientation?h=screen.webkitLockOrientation(g):screen.mozLockOrientation?h=screen.mozLockOrientation(g):screen.msLockOrientation&&(h=screen.msLockOrientation(g));h||console.warn("[Construct 3] Failed to lock orientation")}catch(h){console.warn("[Construct 3] Failed to lock orientation: ",h)}}_OnFullscreenChange(){if(!this._isExportToVideo){var g=c.IsDocumentFullscreen();
g&&"any"!==this._targetOrientation&&this._TrySetTargetOrientation();this.PostToRuntime("fullscreenchange",{isFullscreen:g,innerWidth:this._GetWindowInnerWidth(),innerHeight:this._GetWindowInnerHeight()})}}_OnFullscreenError(g){console.warn("[Construct 3] Fullscreen request failed: ",g);this.PostToRuntime("fullscreenerror",{isFullscreen:c.IsDocumentFullscreen(),innerWidth:this._GetWindowInnerWidth(),innerHeight:this._GetWindowInnerHeight()})}_OnVisibilityChange(g){g?this._iRuntime._CancelAnimationFrame():
this._iRuntime._RequestAnimationFrame();this.PostToRuntime("visibilitychange",{hidden:g})}_OnKeyEvent(g,h){"Backspace"===h.key&&m(h);if(!this._isExportToVideo){var e=b.get(h.code)||h.code;this._PostToRuntimeMaybeSync(g,{code:e,key:h.key,which:h.which,repeat:h.repeat,altKey:h.altKey,ctrlKey:h.ctrlKey,metaKey:h.metaKey,shiftKey:h.shiftKey,timeStamp:h.timeStamp},d)}}_OnMouseWheelEvent(g,h){this._isExportToVideo||this.PostToRuntime(g,{clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,deltaX:h.deltaX,
deltaY:h.deltaY,deltaZ:h.deltaZ,deltaMode:h.deltaMode,timeStamp:h.timeStamp},d)}_OnMouseEvent(g,h,e){this._isExportToVideo||a(h)||this._PostToRuntimeMaybeSync(g,{button:h.button,buttons:h.buttons,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,movementX:h.movementX||0,movementY:h.movementY||0,timeStamp:h.timeStamp},e)}_OnMouseEventAsPointer(g,h){if(!this._isExportToVideo&&!a(h)){var e=this._mousePointerLastButtons;"pointerdown"===g&&0!==e?g="pointermove":"pointerup"===g&&0!==h.buttons&&
(g="pointermove");this._PostToRuntimeMaybeSync(g,{pointerId:1,pointerType:"mouse",button:h.button,buttons:h.buttons,lastButtons:e,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,movementX:h.movementX||0,movementY:h.movementY||0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:h.timeStamp},d);this._mousePointerLastButtons=h.buttons;this._OnMouseEvent(h.type,h,f)}}_OnPointerEvent(g,h){if(!this._isExportToVideo){this._pointerRawUpdateRateLimiter&&"pointermove"!==
g&&this._pointerRawUpdateRateLimiter.Reset();var e=0;"mouse"===h.pointerType&&(e=this._mousePointerLastButtons);this._PostToRuntimeMaybeSync(g,{pointerId:h.pointerId,pointerType:h.pointerType,button:h.button,buttons:h.buttons,lastButtons:e,clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY,movementX:(h.movementX||0)+this._pointerRawMovementX,movementY:(h.movementY||0)+this._pointerRawMovementY,width:h.width||0,height:h.height||0,pressure:h.pressure||0,tangentialPressure:h.tangentialPressure||
0,tiltX:h.tiltX||0,tiltY:h.tiltY||0,twist:h.twist||0,timeStamp:h.timeStamp},d);this._pointerRawMovementY=this._pointerRawMovementX=0;"mouse"===h.pointerType&&(e="mousemove","pointerdown"===g?e="mousedown":"pointerup"===g&&(e="mouseup"),this._OnMouseEvent(e,h,f),this._mousePointerLastButtons=h.buttons)}}_OnPointerRawUpdate(g){this._lastPointerRawUpdateEvent&&(this._pointerRawMovementX+=this._lastPointerRawUpdateEvent.movementX||0,this._pointerRawMovementY+=this._lastPointerRawUpdateEvent.movementY||
0);this._lastPointerRawUpdateEvent=g;this._pointerRawUpdateRateLimiter.Call()}_DoSendPointerRawUpdate(){this._OnPointerEvent("pointermove",this._lastPointerRawUpdateEvent);this._lastPointerRawUpdateEvent=null}_OnTouchEvent(g,h){if(!this._isExportToVideo)for(let e=0,k=h.changedTouches.length;e<k;++e){const v=h.changedTouches[e];this._PostToRuntimeMaybeSync(g,{pointerId:v.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:v.clientX,clientY:v.clientY,pageX:v.pageX,pageY:v.pageY,
movementX:h.movementX||0,movementY:h.movementY||0,width:2*(v.radiusX||v.webkitRadiusX||0),height:2*(v.radiusY||v.webkitRadiusY||0),pressure:v.force||v.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:v.rotationAngle||0,timeStamp:h.timeStamp},d)}}_HandlePointerDownFocus(g){window!==window.top&&window.focus();this._IsElementCanvasOrDocument(g.target)&&document.activeElement&&!this._IsElementCanvasOrDocument(document.activeElement)&&document.activeElement.blur()}_IsElementCanvasOrDocument(g){return!g||
g===document||g===window||g===document.body||"canvas"===g.tagName.toLowerCase()}_AttachDeviceOrientationEvent(){this._attachedDeviceOrientationEvent||(this._attachedDeviceOrientationEvent=!0,window.addEventListener("deviceorientation",g=>this._OnDeviceOrientation(g)),window.addEventListener("deviceorientationabsolute",g=>this._OnDeviceOrientationAbsolute(g)))}_AttachDeviceMotionEvent(){this._attachedDeviceMotionEvent||(this._attachedDeviceMotionEvent=!0,window.addEventListener("devicemotion",g=>this._OnDeviceMotion(g)))}_OnDeviceOrientation(g){this._isExportToVideo||
this.PostToRuntime("deviceorientation",{absolute:!!g.absolute,alpha:g.alpha||0,beta:g.beta||0,gamma:g.gamma||0,timeStamp:g.timeStamp,webkitCompassHeading:g.webkitCompassHeading,webkitCompassAccuracy:g.webkitCompassAccuracy},d)}_OnDeviceOrientationAbsolute(g){this._isExportToVideo||this.PostToRuntime("deviceorientationabsolute",{absolute:!!g.absolute,alpha:g.alpha||0,beta:g.beta||0,gamma:g.gamma||0,timeStamp:g.timeStamp},d)}_OnDeviceMotion(g){if(!this._isExportToVideo){var h=null,e=g.acceleration;
e&&(h={x:e.x||0,y:e.y||0,z:e.z||0});e=null;var k=g.accelerationIncludingGravity;k&&(e={x:k.x||0,y:k.y||0,z:k.z||0});k=null;var v=g.rotationRate;v&&(k={alpha:v.alpha||0,beta:v.beta||0,gamma:v.gamma||0});this.PostToRuntime("devicemotion",{acceleration:h,accelerationIncludingGravity:e,rotationRate:k,interval:g.interval,timeStamp:g.timeStamp},d)}}_OnUpdateCanvasSize(g){var h=this.GetRuntimeInterface();h.IsExportingToVideo()||(h=h.GetCanvas(),h.style.width=g.styleWidth+"px",h.style.height=g.styleHeight+
"px",h.style.marginLeft=g.marginLeft+"px",h.style.marginTop=g.marginTop+"px",this._isFirstSizeUpdate&&(h.style.display="",this._isFirstSizeUpdate=!1))}_OnInvokeDownload(g){const h=g.url;g=g.filename;const e=document.createElement("a"),k=document.body;e.textContent=g;e.href=h;e.download=g;k.appendChild(e);e.click();k.removeChild(e)}async _OnRasterSvgImage(g){var h=g.imageBitmapOpts;g=await self.C3_RasterSvgImageBlob(g.blob,g.imageWidth,g.imageHeight,g.surfaceWidth,g.surfaceHeight);h=h?await createImageBitmap(g,
h):await createImageBitmap(g);return{imageBitmap:h,transferables:[h]}}async _OnGetSvgImageSize(g){return await self.C3_GetSvgImageSize(g.blob)}async _OnAddStylesheet(g){await x(g.url)}_PlayPendingMedia(){var g=[...this._mediaPendingPlay];this._mediaPendingPlay.clear();if(!this._isSilent)for(const h of g)(g=h.play())&&g.catch(e=>{this._mediaRemovedPendingPlay.has(h)||this._mediaPendingPlay.add(h)})}TryPlayMedia(g){if("function"!==typeof g.play)throw Error("missing play function");this._mediaRemovedPendingPlay.delete(g);
let h;try{h=g.play()}catch(e){this._mediaPendingPlay.add(g);return}h&&h.catch(e=>{this._mediaRemovedPendingPlay.has(g)||this._mediaPendingPlay.add(g)})}RemovePendingPlay(g){this._mediaPendingPlay.delete(g);this._mediaRemovedPendingPlay.add(g)}SetSilent(g){this._isSilent=!!g}_OnHideCordovaSplash(){navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()}_OnDebugHighlight(g){if(g.show){this._debugHighlightElem||(this._debugHighlightElem=document.createElement("div"),this._debugHighlightElem.id=
"inspectOutline",document.body.appendChild(this._debugHighlightElem));var h=this._debugHighlightElem;h.style.display="";h.style.left=g.left-1+"px";h.style.top=g.top-1+"px";h.style.width=g.width+2+"px";h.style.height=g.height+2+"px";h.textContent=g.name}else this._debugHighlightElem&&(this._debugHighlightElem.style.display="none")}_OnRegisterSW(){window.C3_RegisterSW&&window.C3_RegisterSW()}_OnPostToDebugger(g){window.c3_postToMessagePort&&(g.from="runtime",window.c3_postToMessagePort(g))}_InvokeFunctionFromJS(g,
h){return this.PostToRuntimeAsync("js-invoke-function",{name:g,params:h})}_OnAlert(g){alert(g.message)}_OnWrapperMessage(g){"entered-fullscreen"===g?(c._SetWrapperIsFullscreenFlag(!0),this._OnFullscreenChange()):"exited-fullscreen"===g?(c._SetWrapperIsFullscreenFlag(!1),this._OnFullscreenChange()):console.warn("Unknown wrapper message: ",g)}_SetExportingToVideo(g){this._isExportToVideo=!0;const h=document.createElement("h1");h.id="exportToVideoMessage";h.textContent=g.message;document.body.prepend(h);
document.body.classList.add("exportingToVideo");this.GetRuntimeInterface().GetCanvas().style.display="";this._iRuntime.SetIsExportingToVideo(g.duration)}_OnExportVideoProgress(g){this._exportVideoProgressMessage=g.message;-1===this._exportVideoUpdateTimerId&&(this._exportVideoUpdateTimerId=setTimeout(()=>this._DoUpdateExportVideoProgressMessage(),250))}_DoUpdateExportVideoProgressMessage(){this._exportVideoUpdateTimerId=-1;const g=document.getElementById("exportToVideoMessage");g&&(g.textContent=
this._exportVideoProgressMessage)}_OnExportedToVideo(g){window.c3_postToMessagePort({type:"exported-video",blob:g.blob,time:g.time})}})}"use strict";
self.JobSchedulerDOM=class{constructor(c){this._runtimeInterface=c;this._baseUrl=c.GetRuntimeBaseURL();"preview"===c.GetExportType()?this._baseUrl+="workers/":this._baseUrl+=c.GetScriptFolder();this._maxNumWorkers=Math.min(navigator.hardwareConcurrency||2,16);this._dispatchWorker=null;this._jobWorkers=[];this._outputPort=this._inputPort=null}async Init(){if(this._hasInitialised)throw Error("already initialised");this._hasInitialised=!0;var c=this._runtimeInterface._GetWorkerURL("dispatchworker.js");
this._dispatchWorker=await this._runtimeInterface.CreateWorker(c,this._baseUrl,{name:"DispatchWorker"});c=new MessageChannel;this._inputPort=c.port1;this._dispatchWorker.postMessage({type:"_init","in-port":c.port2},[c.port2]);this._outputPort=await this._CreateJobWorker()}async _CreateJobWorker(){const c=this._jobWorkers.length;var a=this._runtimeInterface._GetWorkerURL("jobworker.js");a=await this._runtimeInterface.CreateWorker(a,this._baseUrl,{name:"JobWorker"+c});const b=new MessageChannel,d=new MessageChannel;
this._dispatchWorker.postMessage({type:"_addJobWorker",port:b.port1},[b.port1]);a.postMessage({type:"init",number:c,"dispatch-port":b.port2,"output-port":d.port2},[b.port2,d.port2]);this._jobWorkers.push(a);return d.port1}GetPortData(){return{inputPort:this._inputPort,outputPort:this._outputPort,maxNumWorkers:this._maxNumWorkers}}GetPortTransferables(){return[this._inputPort,this._outputPort]}};"use strict";
window.C3_IsSupported&&(window.c3_runtimeInterface=new self.RuntimeInterface({useWorker:!1,workerMainUrl:"workermain.js",engineScripts:["scripts/c3runtime.js"],projectScripts:[],mainProjectScript:"",scriptFolder:"scripts/",workerDependencyScripts:[],exportType:"html5"}));"use strict";
{const c=180/Math.PI;self.AudioDOMHandler=class extends self.DOMHandler{constructor(a){super(a,"audio");this._destinationNode=this._audioContext=null;this._hasAttachedUnblockEvents=this._hasUnblocked=!1;this._unblockFunc=()=>this._UnblockAudioContext();this._audioBuffers=[];this._audioInstances=[];this._lastAudioInstance=null;this._lastPlayedTag="";this._lastTickCount=-1;this._pendingTags=new Map;this._masterVolume=1;this._isSilent=!1;this._timeScaleMode=0;this._timeScale=1;this._gameTime=0;this._panningModel=
"HRTF";this._distanceModel="inverse";this._refDistance=600;this._maxDistance=1E4;this._rolloffFactor=1;this._hasAnySoftwareDecodedMusic=this._playMusicAsSound=!1;this._supportsWebMOpus=this._iRuntime.IsAudioFormatSupported("audio/webm; codecs=opus");this._effects=new Map;this._analysers=new Set;this._hasStartedOfflineRender=this._isPendingPostFxState=!1;this._microphoneTag="";this._microphoneSource=null;self.C3Audio_OnMicrophoneStream=(b,d)=>this._OnMicrophoneStream(b,d);this._destMediaStreamNode=
null;self.C3Audio_GetOutputStream=()=>this._OnGetOutputStream();self.C3Audio_DOMInterface=this;this.AddRuntimeMessageHandlers([["create-audio-context",b=>this._CreateAudioContext(b)],["play",b=>this._Play(b)],["stop",b=>this._Stop(b)],["stop-all",()=>this._StopAll()],["set-paused",b=>this._SetPaused(b)],["set-volume",b=>this._SetVolume(b)],["fade-volume",b=>this._FadeVolume(b)],["set-master-volume",b=>this._SetMasterVolume(b)],["set-muted",b=>this._SetMuted(b)],["set-silent",b=>this._SetSilent(b)],
["set-looping",b=>this._SetLooping(b)],["set-playback-rate",b=>this._SetPlaybackRate(b)],["seek",b=>this._Seek(b)],["preload",b=>this._Preload(b)],["unload",b=>this._Unload(b)],["unload-all",()=>this._UnloadAll()],["set-suspended",b=>this._SetSuspended(b)],["add-effect",b=>this._AddEffect(b)],["set-effect-param",b=>this._SetEffectParam(b)],["remove-effects",b=>this._RemoveEffects(b)],["tick",b=>this._OnTick(b)],["load-state",b=>this._OnLoadState(b)],["offline-render-audio",b=>this._OnOfflineRenderAudio(b)],
["offline-render-finish",()=>this._OnOfflineRenderFinish()]])}async _CreateAudioContext(a){a.isiOSCordova&&(this._playMusicAsSound=!0);this._timeScaleMode=a.timeScaleMode;this._panningModel=["equalpower","HRTF","soundfield"][a.panningModel];this._distanceModel=["linear","inverse","exponential"][a.distanceModel];this._refDistance=a.refDistance;this._maxDistance=a.maxDistance;this._rolloffFactor=a.rolloffFactor;if(this._iRuntime.IsExportingToVideo())this._playMusicAsSound=!0,this._audioContext=new OfflineAudioContext({numberOfChannels:2,
sampleRate:48E3,length:Math.ceil(48E3*this._iRuntime.GetExportToVideoDuration())});else{var b={latencyHint:a.latencyHint};this.SupportsWebMOpus()||(b.sampleRate=48E3);if("undefined"!==typeof AudioContext)this._audioContext=new AudioContext(b);else if("undefined"!==typeof webkitAudioContext)this._audioContext=new webkitAudioContext(b);else throw Error("Web Audio API not supported");this._AttachUnblockEvents();this._audioContext.onstatechange=()=>{"running"!==this._audioContext.state&&this._AttachUnblockEvents();
this.PostToRuntime("audiocontext-state",{audioContextState:this._audioContext.state})}}this._destinationNode=this._audioContext.createGain();this._destinationNode.connect(this._audioContext.destination);b=a.listenerPos;this._audioContext.listener.setPosition(b[0],b[1],b[2]);this._audioContext.listener.setOrientation(0,0,1,0,-1,0);self.C3_GetAudioContextCurrentTime=()=>this.GetAudioCurrentTime();try{await Promise.all(a.preloadList.map(d=>this._GetAudioBuffer(d.originalUrl,d.url,d.type,!1)))}catch(d){console.error("[Construct 3] Preloading sounds failed: ",
d)}return{sampleRate:this._audioContext.sampleRate,audioContextState:this._audioContext.state}}_AttachUnblockEvents(){this._hasAttachedUnblockEvents||(this._hasUnblocked=!1,window.addEventListener("pointerup",this._unblockFunc,!0),window.addEventListener("touchend",this._unblockFunc,!0),window.addEventListener("click",this._unblockFunc,!0),window.addEventListener("keydown",this._unblockFunc,!0),this._hasAttachedUnblockEvents=!0)}_DetachUnblockEvents(){this._hasAttachedUnblockEvents&&(this._hasUnblocked=
!0,window.removeEventListener("pointerup",this._unblockFunc,!0),window.removeEventListener("touchend",this._unblockFunc,!0),window.removeEventListener("click",this._unblockFunc,!0),window.removeEventListener("keydown",this._unblockFunc,!0),this._hasAttachedUnblockEvents=!1)}_UnblockAudioContext(){if(!this._hasUnblocked){var a=this._audioContext;"suspended"===a.state&&a.resume&&a.resume();var b=a.createBuffer(1,220,22050),d=a.createBufferSource();d.buffer=b;d.connect(a.destination);d.start(0);"running"===
a.state&&this._DetachUnblockEvents()}}GetAudioContext(){return this._audioContext}GetAudioCurrentTime(){return this._audioContext.currentTime}GetDestinationNode(){return this._destinationNode}GetDestinationForTag(a){return(a=this._effects.get(a.toLowerCase()))?a[0].GetInputNode():this.GetDestinationNode()}AddEffectForTag(a,b){a=a.toLowerCase();let d=this._effects.get(a);d||(d=[],this._effects.set(a,d));b._SetIndex(d.length);b._SetTag(a);d.push(b);this._ReconnectEffects(a)}_ReconnectEffects(a){let b=
this.GetDestinationNode();const d=this._effects.get(a);if(d&&d.length){b=d[0].GetInputNode();for(let f=0,u=d.length;f<u;++f){const x=d[f];f+1===u?x.ConnectTo(this.GetDestinationNode()):x.ConnectTo(d[f+1].GetInputNode())}}for(const f of this.audioInstancesByTag(a))f.Reconnect(b);this._microphoneSource&&this._microphoneTag===a&&(this._microphoneSource.disconnect(),this._microphoneSource.connect(b))}GetMasterVolume(){return this._masterVolume}IsSilent(){return this._isSilent}GetTimeScaleMode(){return this._timeScaleMode}GetTimeScale(){return this._timeScale}GetGameTime(){return this._gameTime}IsPlayMusicAsSound(){return this._playMusicAsSound}SupportsWebMOpus(){return this._supportsWebMOpus}_SetHasAnySoftwareDecodedMusic(){this._hasAnySoftwareDecodedMusic=
!0}GetPanningModel(){return this._panningModel}GetDistanceModel(){return this._distanceModel}GetReferenceDistance(){return this._refDistance}GetMaxDistance(){return this._maxDistance}GetRolloffFactor(){return this._rolloffFactor}DecodeAudioData(a,b){return b?this._iRuntime._WasmDecodeWebMOpus(a).then(d=>{const f=this._audioContext.createBuffer(1,d.length,48E3);f.getChannelData(0).set(d);return f}):new Promise((d,f)=>{this._audioContext.decodeAudioData(a,d,f)})}TryPlayMedia(a){this._iRuntime.TryPlayMedia(a)}RemovePendingPlay(a){this._iRuntime.RemovePendingPlay(a)}ReleaseInstancesForBuffer(a){let b=
0;for(let d=0,f=this._audioInstances.length;d<f;++d){const u=this._audioInstances[d];this._audioInstances[b]=u;u.GetBuffer()===a?u.Release():++b}this._audioInstances.length=b}ReleaseAllMusicBuffers(){let a=0;for(let b=0,d=this._audioBuffers.length;b<d;++b){const f=this._audioBuffers[b];this._audioBuffers[a]=f;f.IsMusic()?f.Release():++a}this._audioBuffers.length=a}*audioInstancesByTag(a){if(a)for(const b of this._audioInstances)self.AudioDOMHandler.EqualsNoCase(b.GetTag(),a)&&(yield b);else this._lastAudioInstance&&
!this._lastAudioInstance.HasEnded()&&(yield this._lastAudioInstance)}async _GetAudioBuffer(a,b,d,f,u){for(const x of this._audioBuffers)if(x.GetUrl()===b)return await x.Load(),x;if(u)return null;f&&(this._playMusicAsSound||this._hasAnySoftwareDecodedMusic)&&this.ReleaseAllMusicBuffers();a=self.C3AudioBuffer.Create(this,a,b,d,f);this._audioBuffers.push(a);await a.Load();return a}async _GetAudioInstance(a,b,d,f,u){for(const x of this._audioInstances)if(x.GetUrl()===b&&(x.CanBeRecycled()||u))return x.SetTag(f),
x;a=(await this._GetAudioBuffer(a,b,d,u)).CreateInstance(f);this._audioInstances.push(a);return a}_AddPendingTag(a){let b=this._pendingTags.get(a);if(!b){let d=null;b={pendingCount:0,promise:new Promise(f=>d=f),resolve:d};this._pendingTags.set(a,b)}b.pendingCount++}_RemovePendingTag(a){const b=this._pendingTags.get(a);if(!b)throw Error("expected pending tag");b.pendingCount--;0===b.pendingCount&&(b.resolve(),this._pendingTags.delete(a))}TagReady(a){a||(a=this._lastPlayedTag);return(a=this._pendingTags.get(a))?
a.promise:Promise.resolve()}_MaybeStartTicking(){if(0<this._analysers.size)this._StartTicking();else for(const a of this._audioInstances)if(a.IsActive()){this._StartTicking();break}}Tick(){for(var a of this._analysers)a.Tick();a=this.GetAudioCurrentTime();for(var b of this._audioInstances)b.Tick(a);b=this._audioInstances.filter(d=>d.IsActive()).map(d=>d.GetState());this.PostToRuntime("state",{tickCount:this._lastTickCount,audioInstances:b,analysers:[...this._analysers].map(d=>d.GetData())});0===b.length&&
0===this._analysers.size&&this._StopTicking()}PostTrigger(a,b,d){this.PostToRuntime("trigger",{type:a,tag:b,aiid:d})}async _Play(a){const b=a.originalUrl,d=a.url,f=a.type,u=a.isMusic,x=a.tag,p=a.isLooping,q=a.vol,l=a.pos,z=a.panning;let C=a.off;0<C&&!a.trueClock&&(this._audioContext.getOutputTimestamp?(a=this._audioContext.getOutputTimestamp(),C=C-a.performanceTime/1E3+a.contextTime):C=C-performance.now()/1E3+this._audioContext.currentTime);this._lastPlayedTag=x;this._AddPendingTag(x);try{this._lastAudioInstance=
await this._GetAudioInstance(b,d,f,x,u),z?(this._lastAudioInstance.SetPannerEnabled(!0),this._lastAudioInstance.SetPan(z.x,z.y,z.angle,z.innerAngle,z.outerAngle,z.outerGain),z.hasOwnProperty("uid")&&this._lastAudioInstance.SetUID(z.uid)):this._lastAudioInstance.SetPannerEnabled(!1),this._lastAudioInstance.Play(p,q,l,C)}catch(A){console.error("[Construct 3] Audio: error starting playback: ",A);return}finally{this._RemovePendingTag(x)}this._StartTicking()}_Stop(a){a=a.tag;for(const b of this.audioInstancesByTag(a))b.Stop()}_StopAll(){for(const a of this._audioInstances)a.Stop()}_SetPaused(a){const b=
a.tag;a=a.paused;for(const d of this.audioInstancesByTag(b))a?d.Pause():d.Resume();this._MaybeStartTicking()}_SetVolume(a){const b=a.tag;a=a.vol;for(const d of this.audioInstancesByTag(b))d.SetVolume(a)}async _FadeVolume(a){const b=a.tag,d=a.vol,f=a.duration;a=a.stopOnEnd;await this.TagReady(b);for(const u of this.audioInstancesByTag(b))u.FadeVolume(d,f,a);this._MaybeStartTicking()}_SetMasterVolume(a){this._masterVolume=a.vol;this._destinationNode.gain.value=this._masterVolume}_SetMuted(a){const b=
a.tag;a=a.isMuted;for(const d of this.audioInstancesByTag(b))d.SetMuted(a)}_SetSilent(a){this._isSilent=a.isSilent;this._iRuntime.SetSilent(this._isSilent);for(const b of this._audioInstances)b._UpdateMuted()}_SetLooping(a){const b=a.tag;a=a.isLooping;for(const d of this.audioInstancesByTag(b))d.SetLooping(a)}async _SetPlaybackRate(a){const b=a.tag;a=a.rate;await this.TagReady(b);for(const d of this.audioInstancesByTag(b))d.SetPlaybackRate(a)}async _Seek(a){const b=a.tag;a=a.pos;await this.TagReady(b);
for(const d of this.audioInstancesByTag(b))d.Seek(a)}async _Preload(a){const b=a.originalUrl,d=a.url,f=a.type;a=a.isMusic;try{await this._GetAudioInstance(b,d,f,"",a)}catch(u){console.error("[Construct 3] Audio: error preloading: ",u)}}async _Unload(a){if(a=await this._GetAudioBuffer("",a.url,a.type,a.isMusic,!0))a.Release(),a=this._audioBuffers.indexOf(a),-1!==a&&this._audioBuffers.splice(a,1)}_UnloadAll(){for(const a of this._audioBuffers)a.Release();this._audioBuffers.length=0}_SetSuspended(a){a=
a.isSuspended;!a&&this._audioContext.resume&&this._audioContext.resume();for(const b of this._audioInstances)b.SetSuspended(a);a&&this._audioContext.suspend&&this._audioContext.suspend()}_OnTick(a){this._timeScale=a.timeScale;this._gameTime=a.gameTime;this._lastTickCount=a.tickCount;if(0!==this._timeScaleMode)for(var b of this._audioInstances)b._UpdatePlaybackRate();(b=a.listenerPos)&&this._audioContext.listener.setPosition(b[0],b[1],b[2]);for(const d of a.instPans){a=d.uid;for(const f of this._audioInstances)f.GetUID()===
a&&f.SetPanXYA(d.x,d.y,d.angle)}}async _AddEffect(a){var b=a.type;const d=a.tag;var f=a.params;if("filter"===b)f=new self.C3AudioFilterFX(this,...f);else if("delay"===b)f=new self.C3AudioDelayFX(this,...f);else if("convolution"===b){b=null;try{b=await this._GetAudioBuffer(a.bufferOriginalUrl,a.bufferUrl,a.bufferType,!1)}catch(u){console.log("[Construct 3] Audio: error loading convolution: ",u);return}f=new self.C3AudioConvolveFX(this,b.GetAudioBuffer(),...f);f._SetBufferInfo(a.bufferOriginalUrl,a.bufferUrl,
a.bufferType)}else if("flanger"===b)f=new self.C3AudioFlangerFX(this,...f);else if("phaser"===b)f=new self.C3AudioPhaserFX(this,...f);else if("gain"===b)f=new self.C3AudioGainFX(this,...f);else if("tremolo"===b)f=new self.C3AudioTremoloFX(this,...f);else if("ringmod"===b)f=new self.C3AudioRingModFX(this,...f);else if("distortion"===b)f=new self.C3AudioDistortionFX(this,...f);else if("compressor"===b)f=new self.C3AudioCompressorFX(this,...f);else if("analyser"===b)f=new self.C3AudioAnalyserFX(this,
...f);else throw Error("invalid effect type");this.AddEffectForTag(d,f);this._PostUpdatedFxState()}_SetEffectParam(a){const b=a.index,d=a.param,f=a.value,u=a.ramp,x=a.time;a=this._effects.get(a.tag);!a||0>b||b>=a.length||(a[b].SetParam(d,f,u,x),this._PostUpdatedFxState())}_RemoveEffects(a){a=a.tag.toLowerCase();const b=this._effects.get(a);if(b&&b.length){for(const d of b)d.Release();this._effects.delete(a);this._ReconnectEffects(a)}}_AddAnalyser(a){this._analysers.add(a);this._MaybeStartTicking()}_RemoveAnalyser(a){this._analysers.delete(a)}_PostUpdatedFxState(){this._isPendingPostFxState||
(this._isPendingPostFxState=!0,Promise.resolve().then(()=>this._DoPostUpdatedFxState()))}_DoPostUpdatedFxState(){const a={};for(const [b,d]of this._effects)a[b]=d.map(f=>f.GetState());this.PostToRuntime("fxstate",{fxstate:a});this._isPendingPostFxState=!1}async _OnLoadState(a){const b=a.saveLoadMode;if(3!==b)for(var d of this._audioInstances)d.IsMusic()&&1===b||(d.IsMusic()||2!==b)&&d.Stop();for(const f of this._effects.values())for(const u of f)u.Release();this._effects.clear();this._timeScale=a.timeScale;
this._gameTime=a.gameTime;d=a.listenerPos;this._audioContext.listener.setPosition(d[0],d[1],d[2]);this._isSilent=a.isSilent;this._iRuntime.SetSilent(this._isSilent);this._masterVolume=a.masterVolume;this._destinationNode.gain.value=this._masterVolume;d=[];for(const f of Object.values(a.effects))d.push(Promise.all(f.map(u=>this._AddEffect(u))));await Promise.all(d);await Promise.all(a.playing.map(f=>this._LoadAudioInstance(f,b)));this._MaybeStartTicking()}async _LoadAudioInstance(a,b){if(3!==b){var d=
a.bufferOriginalUrl,f=a.bufferUrl,u=a.bufferType,x=a.isMusic,p=a.tag,q=a.isLooping,l=a.volume,z=a.playbackTime;if(!x||1!==b)if(x||2!==b){b=null;try{b=await this._GetAudioInstance(d,f,u,p,x)}catch(C){console.error("[Construct 3] Audio: error loading audio state: ",C);return}b.LoadPanState(a.pan);b.Play(q,l,z,0);a.isPlaying||b.Pause();b._LoadAdditionalState(a)}}}_OnMicrophoneStream(a,b){this._microphoneSource&&this._microphoneSource.disconnect();this._microphoneTag=b.toLowerCase();this._microphoneSource=
this._audioContext.createMediaStreamSource(a);this._microphoneSource.connect(this.GetDestinationForTag(this._microphoneTag))}_OnGetOutputStream(){this._destMediaStreamNode||(this._destMediaStreamNode=this._audioContext.createMediaStreamDestination(),this._destinationNode.connect(this._destMediaStreamNode));return this._destMediaStreamNode.stream}async _OnOfflineRenderAudio(a){try{const b=this._audioContext.suspend(a.time);this._hasStartedOfflineRender?this._audioContext.resume():(this._audioContext.startRendering().then(d=>
this._OnOfflineRenderCompleted(d)).catch(d=>this._OnOfflineRenderError(d)),this._hasStartedOfflineRender=!0);await b}catch(b){this._OnOfflineRenderError(b)}}_OnOfflineRenderFinish(){this._audioContext.resume()}_OnOfflineRenderCompleted(a){const b=[];for(let d=0,f=a.numberOfChannels;d<f;++d){const u=a.getChannelData(d);b.push(u.buffer)}this._iRuntime.PostToRuntimeComponent("runtime","offline-audio-render-completed",{duration:a.duration,length:a.length,numberOfChannels:a.numberOfChannels,sampleRate:a.sampleRate,
channelData:b},null,b)}_OnOfflineRenderError(a){console.error("[Audio] Offline rendering error: ",a)}static EqualsNoCase(a,b){return a.length!==b.length?!1:a===b?!0:a.toLowerCase()===b.toLowerCase()}static ToDegrees(a){return a*c}static DbToLinearNoCap(a){return Math.pow(10,a/20)}static DbToLinear(a){return Math.max(Math.min(self.AudioDOMHandler.DbToLinearNoCap(a),1),0)}static LinearToDbNoCap(a){return Math.log(a)/Math.log(10)*20}static LinearToDb(a){return self.AudioDOMHandler.LinearToDbNoCap(Math.max(Math.min(a,
1),0))}static e4(a,b){return 1-Math.exp(-b*a)}};self.RuntimeInterface.AddDOMHandlerClass(self.AudioDOMHandler)}"use strict";
self.C3AudioBuffer=class{constructor(c,a,b,d,f){this._audioDomHandler=c;this._originalUrl=a;this._url=b;this._type=d;this._isMusic=f;this._api="";this._loadState="not-loaded";this._loadPromise=null}Release(){this._loadState="not-loaded";this._loadPromise=this._audioDomHandler=null}static Create(c,a,b,d,f){const u="audio/webm; codecs=opus"===d&&!c.SupportsWebMOpus();f&&u&&c._SetHasAnySoftwareDecodedMusic();return!f||c.IsPlayMusicAsSound()||u?new self.C3WebAudioBuffer(c,a,b,d,f,u):new self.C3Html5AudioBuffer(c,
a,b,d,f)}CreateInstance(c){return"html5"===this._api?new self.C3Html5AudioInstance(this._audioDomHandler,this,c):new self.C3WebAudioInstance(this._audioDomHandler,this,c)}_Load(){}Load(){this._loadPromise||(this._loadPromise=this._Load());return this._loadPromise}IsLoaded(){}IsLoadedAndDecoded(){}HasFailedToLoad(){return"failed"===this._loadState}GetAudioContext(){return this._audioDomHandler.GetAudioContext()}GetApi(){return this._api}GetOriginalUrl(){return this._originalUrl}GetUrl(){return this._url}GetContentType(){return this._type}IsMusic(){return this._isMusic}GetDuration(){}};
"use strict";
self.C3Html5AudioBuffer=class extends self.C3AudioBuffer{constructor(c,a,b,d,f){super(c,a,b,d,f);this._api="html5";this._audioElem=new Audio;this._audioElem.crossOrigin="anonymous";this._audioElem.autoplay=!1;this._audioElem.preload="auto";this._loadReject=this._loadResolve=null;this._reachedCanPlayThrough=!1;this._audioElem.addEventListener("canplaythrough",()=>this._reachedCanPlayThrough=!0);this._outNode=this.GetAudioContext().createGain();this._mediaSourceNode=null;this._audioElem.addEventListener("canplay",()=>
{this._loadResolve&&(this._loadState="loaded",this._loadResolve(),this._loadReject=this._loadResolve=null);!this._mediaSourceNode&&this._audioElem&&(this._mediaSourceNode=this.GetAudioContext().createMediaElementSource(this._audioElem),this._mediaSourceNode.connect(this._outNode))});this.onended=null;this._audioElem.addEventListener("ended",()=>{if(this.onended)this.onended()});this._audioElem.addEventListener("error",u=>this._OnError(u))}Release(){this._audioDomHandler.ReleaseInstancesForBuffer(this);
this._outNode.disconnect();this._outNode=null;this._mediaSourceNode.disconnect();this._mediaSourceNode=null;this._audioElem&&!this._audioElem.paused&&this._audioElem.pause();this._audioElem=this.onended=null;super.Release()}_Load(){this._loadState="loading";return new Promise((c,a)=>{this._loadResolve=c;this._loadReject=a;this._audioElem.src=this._url})}_OnError(c){console.error(`[Construct 3] Audio '${this._url}' error: `,c);this._loadReject&&(this._loadState="failed",this._loadReject(c),this._loadReject=
this._loadResolve=null)}IsLoaded(){const c=4<=this._audioElem.readyState;c&&(this._reachedCanPlayThrough=!0);return c||this._reachedCanPlayThrough}IsLoadedAndDecoded(){return this.IsLoaded()}GetAudioElement(){return this._audioElem}GetOutputNode(){return this._outNode}GetDuration(){return this._audioElem.duration}};"use strict";
self.C3WebAudioBuffer=class extends self.C3AudioBuffer{constructor(c,a,b,d,f,u){super(c,a,b,d,f);this._api="webaudio";this._audioBuffer=this._audioData=null;this._needsSoftwareDecode=!!u}Release(){this._audioDomHandler.ReleaseInstancesForBuffer(this);this._audioBuffer=this._audioData=null;super.Release()}async _Fetch(){if(this._audioData)return this._audioData;var c=this._audioDomHandler.GetRuntimeInterface();if("cordova"===c.GetExportType()&&c.IsRelativeURL(this._url)&&c.IsFileProtocol())this._audioData=
await c.CordovaFetchLocalFileAsArrayBuffer(this._url);else{c=await fetch(this._url);if(!c.ok)throw Error(`error fetching audio data: ${c.status} ${c.statusText}`);this._audioData=await c.arrayBuffer()}}async _Decode(){if(this._audioBuffer)return this._audioBuffer;this._audioBuffer=await this._audioDomHandler.DecodeAudioData(this._audioData,this._needsSoftwareDecode);this._audioData=null}async _Load(){try{this._loadState="loading",await this._Fetch(),await this._Decode(),this._loadState="loaded"}catch(c){this._loadState=
"failed",console.error(`[Construct 3] Failed to load audio '${this._url}': `,c)}}IsLoaded(){return!(!this._audioData&&!this._audioBuffer)}IsLoadedAndDecoded(){return!!this._audioBuffer}GetAudioBuffer(){return this._audioBuffer}GetDuration(){return this._audioBuffer?this._audioBuffer.duration:0}};"use strict";
{let c=0;self.C3AudioInstance=class{constructor(a,b,d){this._audioDomHandler=a;this._buffer=b;this._tag=d;this._aiId=c++;this._gainNode=this.GetAudioContext().createGain();this._gainNode.connect(this.GetDestinationNode());this._pannerNode=null;this._isPannerEnabled=!1;this._pannerPosition=[0,0,0];this._pannerOrientation=[0,0,0];this._isStopped=!0;this._isLooping=this._resumeMe=this._isPaused=!1;this._volume=1;this._isMuted=!1;this._playbackRate=1;a=this._audioDomHandler.GetTimeScaleMode();this._isTimescaled=
1===a&&!this.IsMusic()||2===a;this._fadeEndTime=this._instUid=-1;this._stopOnFadeEnd=!1}Release(){this._buffer=this._audioDomHandler=null;this._pannerNode&&(this._pannerNode.disconnect(),this._pannerNode=null);this._gainNode.disconnect();this._gainNode=null}GetAudioContext(){return this._audioDomHandler.GetAudioContext()}GetDestinationNode(){return this._audioDomHandler.GetDestinationForTag(this._tag)}GetCurrentTime(){return this._isTimescaled?this._audioDomHandler.GetGameTime():performance.now()/
1E3}GetOriginalUrl(){return this._buffer.GetOriginalUrl()}GetUrl(){return this._buffer.GetUrl()}GetContentType(){return this._buffer.GetContentType()}GetBuffer(){return this._buffer}IsMusic(){return this._buffer.IsMusic()}SetTag(a){this._tag=a}GetTag(){return this._tag}GetAiId(){return this._aiId}HasEnded(){}CanBeRecycled(){}IsPlaying(){return!this._isStopped&&!this._isPaused&&!this.HasEnded()}IsActive(){return!this._isStopped&&!this.HasEnded()}GetPlaybackTime(){}GetDuration(a){let b=this._buffer.GetDuration();
a&&(b/=this._playbackRate||.001);return b}Play(a,b,d,f){}Stop(){}Pause(){}IsPaused(){return this._isPaused}Resume(){}SetVolume(a){this._volume=a;this._gainNode.gain.cancelScheduledValues(0);this._fadeEndTime=-1;this._gainNode.gain.value=this.GetOutputVolume()}FadeVolume(a,b,d){if(!this.IsMuted()){var f=this._gainNode.gain;f.cancelScheduledValues(0);var u=this._audioDomHandler.GetAudioCurrentTime();b=u+b;f.setValueAtTime(f.value,u);f.linearRampToValueAtTime(a,b);this._volume=a;this._fadeEndTime=b;
this._stopOnFadeEnd=d}}_UpdateVolume(){this.SetVolume(this._volume)}Tick(a){-1!==this._fadeEndTime&&a>=this._fadeEndTime&&(this._fadeEndTime=-1,this._stopOnFadeEnd&&this.Stop(),this._audioDomHandler.PostTrigger("fade-ended",this._tag,this._aiId))}GetOutputVolume(){const a=this._volume;return isFinite(a)?a:0}SetMuted(a){a=!!a;this._isMuted!==a&&(this._isMuted=a,this._UpdateMuted())}IsMuted(){return this._isMuted}IsSilent(){return this._audioDomHandler.IsSilent()}_UpdateMuted(){}SetLooping(a){}IsLooping(){return this._isLooping}SetPlaybackRate(a){this._playbackRate!==
a&&(this._playbackRate=a,this._UpdatePlaybackRate())}_UpdatePlaybackRate(){}GetPlaybackRate(){return this._playbackRate}Seek(a){}SetSuspended(a){}SetPannerEnabled(a){a=!!a;this._isPannerEnabled!==a&&((this._isPannerEnabled=a)?(this._pannerNode||(this._pannerNode=this.GetAudioContext().createPanner(),this._pannerNode.panningModel=this._audioDomHandler.GetPanningModel(),this._pannerNode.distanceModel=this._audioDomHandler.GetDistanceModel(),this._pannerNode.refDistance=this._audioDomHandler.GetReferenceDistance(),
this._pannerNode.maxDistance=this._audioDomHandler.GetMaxDistance(),this._pannerNode.rolloffFactor=this._audioDomHandler.GetRolloffFactor()),this._gainNode.disconnect(),this._gainNode.connect(this._pannerNode),this._pannerNode.connect(this.GetDestinationNode())):(this._pannerNode.disconnect(),this._gainNode.disconnect(),this._gainNode.connect(this.GetDestinationNode())))}SetPan(a,b,d,f,u,x){this._isPannerEnabled&&(this.SetPanXYA(a,b,d),a=self.AudioDOMHandler.ToDegrees,this._pannerNode.coneInnerAngle=
a(f),this._pannerNode.coneOuterAngle=a(u),this._pannerNode.coneOuterGain=x)}SetPanXYA(a,b,d){this._isPannerEnabled&&(this._pannerPosition[0]=a,this._pannerPosition[1]=b,this._pannerPosition[2]=0,this._pannerOrientation[0]=Math.cos(d),this._pannerOrientation[1]=Math.sin(d),this._pannerOrientation[2]=0,this._pannerNode.setPosition(...this._pannerPosition),this._pannerNode.setOrientation(...this._pannerOrientation))}SetUID(a){this._instUid=a}GetUID(){return this._instUid}GetResumePosition(){}Reconnect(a){const b=
this._pannerNode||this._gainNode;b.disconnect();b.connect(a)}GetState(){return{aiid:this.GetAiId(),tag:this._tag,duration:this.GetDuration(),volume:this._volume,isPlaying:this.IsPlaying(),playbackTime:this.GetPlaybackTime(),playbackRate:this.GetPlaybackRate(),uid:this._instUid,bufferOriginalUrl:this.GetOriginalUrl(),bufferUrl:"",bufferType:this.GetContentType(),isMusic:this.IsMusic(),isLooping:this.IsLooping(),isMuted:this.IsMuted(),resumePosition:this.GetResumePosition(),pan:this.GetPanState()}}_LoadAdditionalState(a){this.SetPlaybackRate(a.playbackRate);
this.SetMuted(a.isMuted)}GetPanState(){if(!this._pannerNode)return null;const a=this._pannerNode;return{pos:this._pannerPosition,orient:this._pannerOrientation,cia:a.coneInnerAngle,coa:a.coneOuterAngle,cog:a.coneOuterGain,uid:this._instUid}}LoadPanState(a){if(a){this.SetPannerEnabled(!0);a=this._pannerNode;var b=a.pos;this._pannerPosition[0]=b[0];this._pannerPosition[1]=b[1];this._pannerPosition[2]=b[2];b=a.orient;this._pannerOrientation[0]=b[0];this._pannerOrientation[1]=b[1];this._pannerOrientation[2]=
b[2];a.setPosition(...this._pannerPosition);a.setOrientation(...this._pannerOrientation);a.coneInnerAngle=a.cia;a.coneOuterAngle=a.coa;a.coneOuterGain=a.cog;this._instUid=a.uid}else this.SetPannerEnabled(!1)}}}"use strict";
self.C3Html5AudioInstance=class extends self.C3AudioInstance{constructor(c,a,b){super(c,a,b);this._buffer.GetOutputNode().connect(this._gainNode);this._buffer.onended=()=>this._OnEnded()}Release(){this.Stop();this._buffer.GetOutputNode().disconnect();super.Release()}GetAudioElement(){return this._buffer.GetAudioElement()}_OnEnded(){this._isStopped=!0;this._instUid=-1;this._audioDomHandler.PostTrigger("ended",this._tag,this._aiId)}HasEnded(){return this.GetAudioElement().ended}CanBeRecycled(){return this._isStopped?
!0:this.HasEnded()}GetPlaybackTime(){let c=this.GetAudioElement().currentTime;this._isLooping||(c=Math.min(c,this.GetDuration()));return c}Play(c,a,b,d){d=this.GetAudioElement();1!==d.playbackRate&&(d.playbackRate=1);d.loop!==c&&(d.loop=c);this.SetVolume(a);d.muted&&(d.muted=!1);if(d.currentTime!==b)try{d.currentTime=b}catch(f){console.warn(`[Construct 3] Exception seeking audio '${this._buffer.GetUrl()}' to position '${b}': `,f)}this._audioDomHandler.TryPlayMedia(d);this._isPaused=this._isStopped=
!1;this._isLooping=c;this._playbackRate=1}Stop(){const c=this.GetAudioElement();c.paused||c.pause();this._audioDomHandler.RemovePendingPlay(c);this._isStopped=!0;this._isPaused=!1;this._instUid=-1}Pause(){if(!(this._isPaused||this._isStopped||this.HasEnded())){var c=this.GetAudioElement();c.paused||c.pause();this._audioDomHandler.RemovePendingPlay(c);this._isPaused=!0}}Resume(){!this._isPaused||this._isStopped||this.HasEnded()||(this._audioDomHandler.TryPlayMedia(this.GetAudioElement()),this._isPaused=
!1)}_UpdateMuted(){this.GetAudioElement().muted=this._isMuted||this.IsSilent()}SetLooping(c){c=!!c;this._isLooping!==c&&(this._isLooping=c,this.GetAudioElement().loop=c)}_UpdatePlaybackRate(){let c=this._playbackRate;this._isTimescaled&&(c*=this._audioDomHandler.GetTimeScale());try{this.GetAudioElement().playbackRate=c}catch(a){console.warn(`[Construct 3] Unable to set playback rate '${c}':`,a)}}Seek(c){if(!this._isStopped&&!this.HasEnded())try{this.GetAudioElement().currentTime=c}catch(a){console.warn(`[Construct 3] Error seeking audio to '${c}': `,
a)}}GetResumePosition(){return this.GetPlaybackTime()}SetSuspended(c){c?this.IsPlaying()?(this.GetAudioElement().pause(),this._resumeMe=!0):this._resumeMe=!1:this._resumeMe&&(this._audioDomHandler.TryPlayMedia(this.GetAudioElement()),this._resumeMe=!1)}};"use strict";
self.C3WebAudioInstance=class extends self.C3AudioInstance{constructor(c,a,b){super(c,a,b);this._bufferSource=null;this._onended_handler=d=>this._OnEnded(d);this._hasPlaybackEnded=!0;this._activeSource=null;this._resumePosition=this._playFromSeekPos=this._playStartTime=0;this._muteVol=1}Release(){this.Stop();this._ReleaseBufferSource();this._onended_handler=null;super.Release()}_ReleaseBufferSource(){this._bufferSource&&this._bufferSource.disconnect();this._activeSource=this._bufferSource=null}_OnEnded(c){this._isPaused||
this._resumeMe||c.target!==this._activeSource||(this._isStopped=this._hasPlaybackEnded=!0,this._instUid=-1,this._ReleaseBufferSource(),this._audioDomHandler.PostTrigger("ended",this._tag,this._aiId))}HasEnded(){return!this._isStopped&&this._bufferSource&&this._bufferSource.loop||this._isPaused?!1:this._hasPlaybackEnded}CanBeRecycled(){return!this._bufferSource||this._isStopped?!0:this.HasEnded()}GetPlaybackTime(){let c;c=this._isPaused?this._resumePosition:this._playFromSeekPos+(this.GetCurrentTime()-
this._playStartTime)*this._playbackRate;this._isLooping||(c=Math.min(c,this.GetDuration()));return c}Play(c,a,b,d){this._muteVol=1;this.SetVolume(a);this._ReleaseBufferSource();this._bufferSource=this.GetAudioContext().createBufferSource();this._bufferSource.buffer=this._buffer.GetAudioBuffer();this._bufferSource.connect(this._gainNode);this._activeSource=this._bufferSource;this._bufferSource.onended=this._onended_handler;this._bufferSource.loop=c;this._bufferSource.start(d,b);this._isPaused=this._isStopped=
this._hasPlaybackEnded=!1;this._isLooping=c;this._playbackRate=1;this._playStartTime=this.GetCurrentTime();this._playFromSeekPos=b}Stop(){if(this._bufferSource)try{this._bufferSource.stop(0)}catch(c){}this._isStopped=!0;this._isPaused=!1;this._instUid=-1}Pause(){this._isPaused||this._isStopped||this.HasEnded()||(this._resumePosition=this.GetPlaybackTime(),this._isLooping&&(this._resumePosition%=this.GetDuration()),this._isPaused=!0,this._bufferSource.stop(0))}Resume(){!this._isPaused||this._isStopped||
this.HasEnded()||(this._ReleaseBufferSource(),this._bufferSource=this.GetAudioContext().createBufferSource(),this._bufferSource.buffer=this._buffer.GetAudioBuffer(),this._bufferSource.connect(this._gainNode),this._activeSource=this._bufferSource,this._bufferSource.onended=this._onended_handler,this._bufferSource.loop=this._isLooping,this._UpdateVolume(),this._UpdatePlaybackRate(),this._bufferSource.start(0,this._resumePosition),this._playStartTime=this.GetCurrentTime(),this._playFromSeekPos=this._resumePosition,
this._isPaused=!1)}GetOutputVolume(){return super.GetOutputVolume()*this._muteVol}_UpdateMuted(){this._muteVol=this._isMuted||this.IsSilent()?0:1;this._UpdateVolume()}SetLooping(c){c=!!c;this._isLooping!==c&&(this._isLooping=c,this._bufferSource&&(this._bufferSource.loop=c))}_UpdatePlaybackRate(){let c=this._playbackRate;this._isTimescaled&&(c*=this._audioDomHandler.GetTimeScale());this._bufferSource&&(this._bufferSource.playbackRate.value=c)}Seek(c){this._isStopped||this.HasEnded()||(this._isPaused?
this._resumePosition=c:(this.Pause(),this._resumePosition=c,this.Resume()))}GetResumePosition(){return this._resumePosition}SetSuspended(c){c?this.IsPlaying()?(this._resumeMe=!0,this._resumePosition=this.GetPlaybackTime(),this._isLooping&&(this._resumePosition%=this.GetDuration()),this._bufferSource.stop(0)):this._resumeMe=!1:this._resumeMe&&(this._ReleaseBufferSource(),this._bufferSource=this.GetAudioContext().createBufferSource(),this._bufferSource.buffer=this._buffer.GetAudioBuffer(),this._bufferSource.connect(this._gainNode),
this._activeSource=this._bufferSource,this._bufferSource.onended=this._onended_handler,this._bufferSource.loop=this._isLooping,this._UpdateVolume(),this._UpdatePlaybackRate(),this._bufferSource.start(0,this._resumePosition),this._playStartTime=this.GetCurrentTime(),this._playFromSeekPos=this._resumePosition,this._resumeMe=!1)}_LoadAdditionalState(c){super._LoadAdditionalState(c);this._resumePosition=c.resumePosition}};"use strict";
{class c{constructor(a){this._audioDomHandler=a;this._audioContext=a.GetAudioContext();this._index=-1;this._type=this._tag="";this._params=null}Release(){this._audioContext=null}_SetIndex(a){this._index=a}GetIndex(){return this._index}_SetTag(a){this._tag=a}GetTag(){return this._tag}CreateGain(){return this._audioContext.createGain()}GetInputNode(){}ConnectTo(a){}SetAudioParam(a,b,d,f){a.cancelScheduledValues(0);if(0===f)a.value=b;else{var u=this._audioContext.currentTime;f+=u;switch(d){case 0:a.setValueAtTime(b,
f);break;case 1:a.setValueAtTime(a.value,u);a.linearRampToValueAtTime(b,f);break;case 2:a.setValueAtTime(a.value,u),a.exponentialRampToValueAtTime(b,f)}}}GetState(){return{type:this._type,tag:this._tag,params:this._params}}}self.C3AudioFilterFX=class extends c{constructor(a,b,d,f,u,x,p){super(a);this._type="filter";this._params=[b,d,f,u,x,p];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode.gain.value=p;this._dryNode=this.CreateGain();this._dryNode.gain.value=1-p;this._filterNode=
this._audioContext.createBiquadFilter();this._filterNode.type=b;this._filterNode.frequency.value=d;this._filterNode.detune.value=f;this._filterNode.Q.value=u;this._filterNode.gain.vlaue=x;this._inputNode.connect(this._filterNode);this._inputNode.connect(this._dryNode);this._filterNode.connect(this._wetNode)}Release(){this._inputNode.disconnect();this._filterNode.disconnect();this._wetNode.disconnect();this._dryNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();this._wetNode.connect(a);
this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[5]=b;this.SetAudioParam(this._wetNode.gain,b,d,f);this.SetAudioParam(this._dryNode.gain,1-b,d,f);break;case 1:this._params[1]=b;this.SetAudioParam(this._filterNode.frequency,b,d,f);break;case 2:this._params[2]=b;this.SetAudioParam(this._filterNode.detune,b,d,f);break;case 3:this._params[3]=b;this.SetAudioParam(this._filterNode.Q,
b,d,f);break;case 4:this._params[4]=b,this.SetAudioParam(this._filterNode.gain,b,d,f)}}};self.C3AudioDelayFX=class extends c{constructor(a,b,d,f){super(a);this._type="delay";this._params=[b,d,f];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode.gain.value=f;this._dryNode=this.CreateGain();this._dryNode.gain.value=1-f;this._mainNode=this.CreateGain();this._delayNode=this._audioContext.createDelay(b);this._delayNode.delayTime.value=b;this._delayGainNode=this.CreateGain();
this._delayGainNode.gain.value=d;this._inputNode.connect(this._mainNode);this._inputNode.connect(this._dryNode);this._mainNode.connect(this._wetNode);this._mainNode.connect(this._delayNode);this._delayNode.connect(this._delayGainNode);this._delayGainNode.connect(this._mainNode)}Release(){this._inputNode.disconnect();this._wetNode.disconnect();this._dryNode.disconnect();this._mainNode.disconnect();this._delayNode.disconnect();this._delayGainNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();
this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){const u=self.AudioDOMHandler.DbToLinear;switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[2]=b;this.SetAudioParam(this._wetNode.gain,b,d,f);this.SetAudioParam(this._dryNode.gain,1-b,d,f);break;case 4:this._params[1]=u(b);this.SetAudioParam(this._delayGainNode.gain,u(b),d,f);break;case 5:this._params[0]=b,this.SetAudioParam(this._delayNode.delayTime,b,d,f)}}};
self.C3AudioConvolveFX=class extends c{constructor(a,b,d,f){super(a);this._type="convolution";this._params=[d,f];this._bufferType=this._bufferUrl=this._bufferOriginalUrl="";this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode.gain.value=f;this._dryNode=this.CreateGain();this._dryNode.gain.value=1-f;this._convolveNode=this._audioContext.createConvolver();this._convolveNode.normalize=d;this._convolveNode.buffer=b;this._inputNode.connect(this._convolveNode);this._inputNode.connect(this._dryNode);
this._convolveNode.connect(this._wetNode)}Release(){this._inputNode.disconnect();this._convolveNode.disconnect();this._wetNode.disconnect();this._dryNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0),this._params[1]=b,this.SetAudioParam(this._wetNode.gain,b,d,f),this.SetAudioParam(this._dryNode.gain,
1-b,d,f)}}_SetBufferInfo(a,b,d){this._bufferOriginalUrl=a;this._bufferUrl=b;this._bufferType=d}GetState(){const a=super.GetState();a.bufferOriginalUrl=this._bufferOriginalUrl;a.bufferUrl="";a.bufferType=this._bufferType;return a}};self.C3AudioFlangerFX=class extends c{constructor(a,b,d,f,u,x){super(a);this._type="flanger";this._params=[b,d,f,u,x];this._inputNode=this.CreateGain();this._dryNode=this.CreateGain();this._dryNode.gain.value=1-x/2;this._wetNode=this.CreateGain();this._wetNode.gain.value=
x/2;this._feedbackNode=this.CreateGain();this._feedbackNode.gain.value=u;this._delayNode=this._audioContext.createDelay(b+d);this._delayNode.delayTime.value=b;this._oscNode=this._audioContext.createOscillator();this._oscNode.frequency.value=f;this._oscGainNode=this.CreateGain();this._oscGainNode.gain.value=d;this._inputNode.connect(this._delayNode);this._inputNode.connect(this._dryNode);this._delayNode.connect(this._wetNode);this._delayNode.connect(this._feedbackNode);this._feedbackNode.connect(this._delayNode);
this._oscNode.connect(this._oscGainNode);this._oscGainNode.connect(this._delayNode.delayTime);this._oscNode.start(0)}Release(){this._oscNode.stop(0);this._inputNode.disconnect();this._delayNode.disconnect();this._oscNode.disconnect();this._oscGainNode.disconnect();this._dryNode.disconnect();this._wetNode.disconnect();this._feedbackNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,
b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[4]=b;this.SetAudioParam(this._wetNode.gain,b/2,d,f);this.SetAudioParam(this._dryNode.gain,1-b/2,d,f);break;case 6:this._params[1]=b/1E3;this.SetAudioParam(this._oscGainNode.gain,b/1E3,d,f);break;case 7:this._params[2]=b;this.SetAudioParam(this._oscNode.frequency,b,d,f);break;case 8:this._params[3]=b/100,this.SetAudioParam(this._feedbackNode.gain,b/100,d,f)}}};self.C3AudioPhaserFX=class extends c{constructor(a,b,d,f,u,x,p){super(a);
this._type="phaser";this._params=[b,d,f,u,x,p];this._inputNode=this.CreateGain();this._dryNode=this.CreateGain();this._dryNode.gain.value=1-p/2;this._wetNode=this.CreateGain();this._wetNode.gain.value=p/2;this._filterNode=this._audioContext.createBiquadFilter();this._filterNode.type="allpass";this._filterNode.frequency.value=b;this._filterNode.detune.value=d;this._filterNode.Q.value=f;this._oscNode=this._audioContext.createOscillator();this._oscNode.frequency.value=x;this._oscGainNode=this.CreateGain();
this._oscGainNode.gain.value=u;this._inputNode.connect(this._filterNode);this._inputNode.connect(this._dryNode);this._filterNode.connect(this._wetNode);this._oscNode.connect(this._oscGainNode);this._oscGainNode.connect(this._filterNode.frequency);this._oscNode.start(0)}Release(){this._oscNode.stop(0);this._inputNode.disconnect();this._filterNode.disconnect();this._oscNode.disconnect();this._oscGainNode.disconnect();this._dryNode.disconnect();this._wetNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();
this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[5]=b;this.SetAudioParam(this._wetNode.gain,b/2,d,f);this.SetAudioParam(this._dryNode.gain,1-b/2,d,f);break;case 1:this._params[0]=b;this.SetAudioParam(this._filterNode.frequency,b,d,f);break;case 2:this._params[1]=b;this.SetAudioParam(this._filterNode.detune,b,d,f);break;case 3:this._params[2]=b;this.SetAudioParam(this._filterNode.Q,
b,d,f);break;case 6:this._params[3]=b;this.SetAudioParam(this._oscGainNode.gain,b,d,f);break;case 7:this._params[4]=b,this.SetAudioParam(this._oscNode.frequency,b,d,f)}}};self.C3AudioGainFX=class extends c{constructor(a,b){super(a);this._type="gain";this._params=[b];this._node=this.CreateGain();this._node.gain.value=b}Release(){this._node.disconnect();super.Release()}ConnectTo(a){this._node.disconnect();this._node.connect(a)}GetInputNode(){return this._node}SetParam(a,b,d,f){const u=self.AudioDOMHandler.DbToLinear;
switch(a){case 4:this._params[0]=u(b),this.SetAudioParam(this._node.gain,u(b),d,f)}}};self.C3AudioTremoloFX=class extends c{constructor(a,b,d){super(a);this._type="tremolo";this._params=[b,d];this._node=this.CreateGain();this._node.gain.value=1-d/2;this._oscNode=this._audioContext.createOscillator();this._oscNode.frequency.value=b;this._oscGainNode=this.CreateGain();this._oscGainNode.gain.value=d/2;this._oscNode.connect(this._oscGainNode);this._oscGainNode.connect(this._node.gain);this._oscNode.start(0)}Release(){this._oscNode.stop(0);
this._oscNode.disconnect();this._oscGainNode.disconnect();this._node.disconnect();super.Release()}ConnectTo(a){this._node.disconnect();this._node.connect(a)}GetInputNode(){return this._node}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[1]=b;this.SetAudioParam(this._node.gain,1-b/2,d,f);this.SetAudioParam(this._oscGainNode.gain,b/2,d,f);break;case 7:this._params[0]=b,this.SetAudioParam(this._oscNode.frequency,b,d,f)}}};self.C3AudioRingModFX=class extends c{constructor(a,
b,d){super(a);this._type="ringmod";this._params=[b,d];this._inputNode=this.CreateGain();this._wetNode=this.CreateGain();this._wetNode.gain.value=d;this._dryNode=this.CreateGain();this._dryNode.gain.value=1-d;this._ringNode=this.CreateGain();this._ringNode.gain.value=0;this._oscNode=this._audioContext.createOscillator();this._oscNode.frequency.value=b;this._oscNode.connect(this._ringNode.gain);this._oscNode.start(0);this._inputNode.connect(this._ringNode);this._inputNode.connect(this._dryNode);this._ringNode.connect(this._wetNode)}Release(){this._oscNode.stop(0);
this._oscNode.disconnect();this._ringNode.disconnect();this._inputNode.disconnect();this._wetNode.disconnect();this._dryNode.disconnect();super.Release()}ConnectTo(a){this._wetNode.disconnect();this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/100,1),0);this._params[1]=b;this.SetAudioParam(this._wetNode.gain,b,d,f);this.SetAudioParam(this._dryNode.gain,1-b,d,f);break;case 7:this._params[0]=
b,this.SetAudioParam(this._oscNode.frequency,b,d,f)}}};self.C3AudioDistortionFX=class extends c{constructor(a,b,d,f,u,x){super(a);this._type="distortion";this._params=[b,d,f,u,x];this._inputNode=this.CreateGain();this._preGain=this.CreateGain();this._postGain=this.CreateGain();this._SetDrive(f,u);this._wetNode=this.CreateGain();this._wetNode.gain.value=x;this._dryNode=this.CreateGain();this._dryNode.gain.value=1-x;this._waveShaper=this._audioContext.createWaveShaper();this._curve=new Float32Array(65536);
this._GenerateColortouchCurve(b,d);this._waveShaper.curve=this._curve;this._inputNode.connect(this._preGain);this._inputNode.connect(this._dryNode);this._preGain.connect(this._waveShaper);this._waveShaper.connect(this._postGain);this._postGain.connect(this._wetNode)}Release(){this._inputNode.disconnect();this._preGain.disconnect();this._waveShaper.disconnect();this._postGain.disconnect();this._wetNode.disconnect();this._dryNode.disconnect();super.Release()}_SetDrive(a,b){.01>a&&(a=.01);this._preGain.gain.value=
a;this._postGain.gain.value=Math.pow(1/a,.6)*b}_GenerateColortouchCurve(a,b){for(let d=0;32768>d;++d){let f=d/32768;f=this._Shape(f,a,b);this._curve[32768+d]=f;this._curve[32768-d-1]=-f}}_Shape(a,b,d){d=1.05*d*b-b;const f=0>a?-1:1;a=0>a?-a:a;return(a<b?a:b+d*self.AudioDOMHandler.e4(a-b,1/d))*f}ConnectTo(a){this._wetNode.disconnect();this._wetNode.connect(a);this._dryNode.disconnect();this._dryNode.connect(a)}GetInputNode(){return this._inputNode}SetParam(a,b,d,f){switch(a){case 0:b=Math.max(Math.min(b/
100,1),0),this._params[4]=b,this.SetAudioParam(this._wetNode.gain,b,d,f),this.SetAudioParam(this._dryNode.gain,1-b,d,f)}}};self.C3AudioCompressorFX=class extends c{constructor(a,b,d,f,u,x){super(a);this._type="compressor";this._params=[b,d,f,u,x];this._node=this._audioContext.createDynamicsCompressor();this._node.threshold.value=b;this._node.knee.value=d;this._node.ratio.value=f;this._node.attack.value=u;this._node.release.value=x}Release(){this._node.disconnect();super.Release()}ConnectTo(a){this._node.disconnect();
this._node.connect(a)}GetInputNode(){return this._node}SetParam(a,b,d,f){}};self.C3AudioAnalyserFX=class extends c{constructor(a,b,d){super(a);this._type="analyser";this._params=[b,d];this._node=this._audioContext.createAnalyser();this._node.fftSize=b;this._node.smoothingTimeConstant=d;this._freqBins=new Float32Array(this._node.frequencyBinCount);this._signal=new Uint8Array(b);this._rms=this._peak=0;this._audioDomHandler._AddAnalyser(this)}Release(){this._audioDomHandler._RemoveAnalyser(this);this._node.disconnect();
super.Release()}Tick(){this._node.getFloatFrequencyData(this._freqBins);this._node.getByteTimeDomainData(this._signal);const a=this._node.fftSize;let b=this._peak=0;for(var d=0;d<a;++d){let f=(this._signal[d]-128)/128;0>f&&(f=-f);this._peak<f&&(this._peak=f);b+=f*f}d=self.AudioDOMHandler.LinearToDb;this._peak=d(this._peak);this._rms=d(Math.sqrt(b/a))}ConnectTo(a){this._node.disconnect();this._node.connect(a)}GetInputNode(){return this._node}SetParam(a,b,d,f){}GetData(){return{tag:this.GetTag(),index:this.GetIndex(),
peak:this._peak,rms:this._rms,binCount:this._node.frequencyBinCount,freqBins:this._freqBins}}}}"use strict";
self.RuntimeInterface.AddDOMHandlerClass(class extends self.DOMHandler{constructor(c){super(c,"browser");this._exportType="";this.AddRuntimeMessageHandlers([["get-initial-state",a=>this._OnGetInitialState(a)],["ready-for-sw-messages",()=>this._OnReadyForSWMessages()],["alert",a=>this._OnAlert(a)],["close",()=>this._OnClose()],["set-focus",a=>this._OnSetFocus(a)],["vibrate",a=>this._OnVibrate(a)],["lock-orientation",a=>this._OnLockOrientation(a)],["unlock-orientation",()=>this._OnUnlockOrientation()],
["navigate",a=>this._OnNavigate(a)],["request-fullscreen",a=>this._OnRequestFullscreen(a)],["exit-fullscreen",()=>this._OnExitFullscreen()],["set-hash",a=>this._OnSetHash(a)]]);window.addEventListener("online",()=>this._OnOnlineStateChanged(!0));window.addEventListener("offline",()=>this._OnOnlineStateChanged(!1));window.addEventListener("hashchange",()=>this._OnHashChange());document.addEventListener("backbutton",()=>this._OnCordovaBackButton())}_OnGetInitialState(c){this._exportType=c.exportType;
return{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isConstructArcade:"undefined"!==typeof window.is_scirra_arcade}}_OnReadyForSWMessages(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(c=>this.PostToRuntime("sw-message",c.data))}_OnOnlineStateChanged(c){this.PostToRuntime("online-state",
{isOnline:c})}_OnCordovaBackButton(){this.PostToRuntime("backbutton")}GetNWjsWindow(){return"nwjs"===this._exportType?nw.Window.get():null}_OnAlert(c){alert(c.message)}_OnClose(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}_OnSetFocus(c){c=c.isFocus;if("nwjs"===this._exportType){const a=this.GetNWjsWindow();c?a.focus():a.blur()}else c?window.focus():window.blur()}_OnVibrate(c){navigator.vibrate&&
navigator.vibrate(c.pattern)}_OnLockOrientation(c){c=c.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(c).catch(a=>console.warn("[Construct 3] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(c):screen.webkitLockOrientation?a=screen.webkitLockOrientation(c):screen.mozLockOrientation?a=screen.mozLockOrientation(c):screen.msLockOrientation&&(a=screen.msLockOrientation(c));a||console.warn("[Construct 3] Failed to lock orientation")}catch(a){console.warn("[Construct 3] Failed to lock orientation: ",
a)}}_OnUnlockOrientation(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(c){}}_OnNavigate(c){var a=c.type;if("back"===a)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.history.back();else if("forward"===a)window.history.forward();
else if("reload"===a)location.reload();else if("url"===a){a=c.url;const b=c.target;c=c.exportType;self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(a,"_system"):"preview"===c||"windows-webview2"===c?window.open(a,"_blank"):this._isConstructArcade||(2===b?window.top.location=a:1===b?window.parent.location=a:window.location=a)}else"new-window"===a&&(a=c.url,c=c.tag,self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(a,"_system"):window.open(a,c))}_OnRequestFullscreen(c){if("windows-webview2"===
this._exportType||"macos-wkwebview"===this._exportType)self.RuntimeInterface._SetWrapperIsFullscreenFlag(!0),this._iRuntime._SendWrapperMessage({type:"set-fullscreen",fullscreen:!0});else{const a={navigationUI:"auto"};c=c.navUI;1===c?a.navigationUI="hide":2===c&&(a.navigationUI="show");c=document.documentElement;c.requestFullscreen?c.requestFullscreen(a):c.mozRequestFullScreen?c.mozRequestFullScreen(a):c.msRequestFullscreen?c.msRequestFullscreen(a):c.webkitRequestFullScreen&&("undefined"!==typeof Element.ALLOW_KEYBOARD_INPUT?
c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):c.webkitRequestFullScreen())}}_OnExitFullscreen(){"windows-webview2"===this._exportType||"macos-wkwebview"===this._exportType?(self.RuntimeInterface._SetWrapperIsFullscreenFlag(!1),this._iRuntime._SendWrapperMessage({type:"set-fullscreen",fullscreen:!1})):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&
document.webkitCancelFullScreen()}_OnSetHash(c){location.hash=c.hash}_OnHashChange(){this.PostToRuntime("hashchange",{location:location.toString()})}});"use strict";
self.RuntimeInterface.AddDOMHandlerClass(class extends self.DOMHandler{constructor(c){super(c,"touch");this.AddRuntimeMessageHandler("request-permission",a=>this._OnRequestPermission(a))}async _OnRequestPermission(c){c=c.type;let a=!0;0===c?a=await this._RequestOrientationPermission():1===c&&(a=await this._RequestMotionPermission());this.PostToRuntime("permission-result",{type:c,result:a})}async _RequestOrientationPermission(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;
try{return"granted"===await self.DeviceOrientationEvent.requestPermission()}catch(c){return console.warn("[Touch] Failed to request orientation permission: ",c),!1}}async _RequestMotionPermission(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{return"granted"===await self.DeviceMotionEvent.requestPermission()}catch(c){return console.warn("[Touch] Failed to request motion permission: ",c),!1}}});"use strict";
{const c={};let a=null,b=null;const d={banner:"ca-app-pub-3940256099942544/2934735716",interstitial:"ca-app-pub-3940256099942544/4411468910",rewarded:"ca-app-pub-3940256099942544/1712485313",rewardedInterstitial:"ca-app-pub-3940256099942544/6978759866"};let f=!1;function u(q,l){q(l,null)}function x(q,l){c[q]=l;self.admob.configRequest(c)}async function p(){if("android"===self.cordova.platformId)return self.C3AdUtilsMD5(self.device.uuid).toUpperCase();if("ios"===self.cordova.platformId){const q=await self.cordova.plugins.idfa.getInfo();
if(!q.trackingLimited)return f=!0,self.C3AdUtilsMD5(q.idfa).toUpperCase()}}self.C3AdUtils={Success:function(q,l){q(null,l)},Failure:u,StartAdmobPlus:async function(q,l){l="undefined"!==typeof l?l:a.debug;return b?b:b=new Promise((z,C)=>{document.addEventListener("deviceready",async()=>{try{const A=setTimeout(()=>{z(!1);u(q,"failure to initialize")},5E3);await self.admob.start();clearTimeout(A);if(l){const r=await p();x("testDeviceIds",[r])}z(!0)}catch(A){z(!1),u(q,"Initialization failure")}})})},
UpdateAdmobPlusRequest:x,SetInitConfigureOptions:function(q,l,z,C,A,r,n){a||(a={id:q,pubID:l,privacyPolicy:z,showFree:C,showConsent:A,debug:r,debugLocation:n},Object.freeze(a))},HasInitConfigurationOptions:function(){return!!a},GetAdUnit:function(q,l){if("android"===self.cordova.platformId)return q;if("ios"===self.cordova.platformId){const z=!!d[l];return a.debug&&!f&&z?(console.log("[C3 advert]","USING TEST AD UNITS"),d[l]):q}},get ConfigurationOptions(){return a},get TestId(){return p()}}}"use strict";
{const c=self.C3AdUtils,a=c.Success,b=c.Failure,d={get LOAD(){return self.admob.Events.bannerLoad},get LOAD_FAIL(){return self.admob.Events.bannerLoadFail}};class f{constructor(x,p,q,l){if(!x)return b(l,"Unit ID not specified");if(!p)return b(l,"Ad size not specified");if(!q)return b(l,"Ad position not specified");this._adUnitId=x;this._position=q;this._size="";switch(p){case "portrait":this._size=5;break;case "landscape":this._size=5;break;case "standard":this._size=0;break;case "large":this._size=
1;break;case "medium":this._size=2;break;case "full":this._size=3;break;case "leaderboard":this._size=4;break;default:this._size=5}this._ad=null;this._adShowing=this._adLoading=!1}Load(x,p){if(this._ad)return a(p,"banner ad loaded");u.call(this,p);x={adUnitId:c.GetAdUnit(this._adUnitId,"banner"),size:this._size,position:this._position,offset:0,npa:"NON_PERSONALIZED"===x?"1":"0"};this._ad=new self.admob.BannerAd(x);this._ad.load()}async Show(x){if(!this._ad)return b(x,"banner ad not created");if(this._adLoading)return b(x,
"banner ad still loading");if(this._adShowing)return a(x,"banner ad already shown");await this._ad.show();this._adShowing=!0;a(x,"banner shown")}async Hide(x){if(!this._ad)return b(x,"banner ad not created");if(this._adLoading)return b(x,"banner ad still loading");if(!this._adShowing)return a(x,"banner ad not being shown");await this._ad.hide();this._adShowing=!1;a(x,"banner ad hidden")}IsLoading(){return this._adLoading}IsShowing(){return this._adShowing}}function u(x){const p=l=>{this._adLoading=
!1;a(x,"banner ad loaded");document.removeEventListener(d.LOAD,p);document.removeEventListener(d.LOAD_FAIL,q)},q=l=>{this._ad=null;this._adLoading=!1;b(x,"banner ad failed to load");document.removeEventListener(d.LOAD,p);document.removeEventListener(d.LOAD_FAIL,q)};document.addEventListener(d.LOAD,p);document.addEventListener(d.LOAD_FAIL,q)}self.C3BannerAd=f}"use strict";
{const c=self.C3AdUtils,a=c.Success,b=c.Failure,d={get LOAD(){return self.admob.Events.interstitialLoad},get LOAD_FAIL(){return self.admob.Events.interstitialLoadFail},get SHOW(){return self.admob.Events.interstitialShow},get SHOW_FAIL(){return self.admob.Events.interstitialShowFail},get DISMISS(){return self.admob.Events.interstitialDismiss}};class f{constructor(p,q){if(!p)return b(q,"Unit ID not specified");this._adUnitId=p;this._ad=null;this._loadSuccess=this._adShowing=this._adLoading=!1;this._loadPromiseResolver=
null;this._loadPromise=this.GetLoadPromise();document.addEventListener(d.DISMISS,async l=>{this._adShowing=!1;this._adLoading=!0;this._loadSuccess=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();u.call(this);self.C3MobileAdvertsAPI.real.resumeRuntime();await this._ad.load()})}GetLoadPromise(){return this._loadPromise?this._loadPromise:this._loadPromise=new Promise(p=>{this._loadPromiseResolver=p})}ResolveLoadPromise(p){this._loadSuccess=p;this._loadPromiseResolver&&this._loadPromiseResolver(p);
this._loadPromiseResolver=this._loadPromise=null;this._loadPromise=this.GetLoadPromise()}Load(p,q){p={adUnitId:c.GetAdUnit(this._adUnitId,"interstitial"),npa:"NON_PERSONALIZED"===p?"1":"0"};this._adLoading=!0;this._loadSuccess=this._adShowing=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();this._ad=new self.admob.InterstitialAd(p);u.call(this,q);this._ad.load()}async Show(p){if(!this._ad)return b(p,"interstitial ad not created");if(this._adShowing)return a(p,"interstitial ad already shown");
this._adLoading&&await this.GetLoadPromise();await (async()=>{this._loadSuccess?(x.call(this,p),await this._ad.show()):(u.call(this),this._loadSuccess=!1,this._loadPromise=null,this._ad.load(),await this.GetLoadPromise(),this._loadSuccess?(x.call(this,p),await this._ad.show()):b(p,"interstitial ad failed to load"))})()}IsLoading(){return this._adLoading}IsShowing(){return this._adShowing}}function u(p){const q=z=>{this._adLoading=!1;this.ResolveLoadPromise(!0);p&&a(p,"interstitial ad load");document.removeEventListener(d.LOAD,
q);document.removeEventListener(d.LOAD_FAIL,l)},l=z=>{this._adLoading=!1;this.ResolveLoadPromise(!1);p&&b(p,"interstitial ad failed to load");document.removeEventListener(d.LOAD,q);document.removeEventListener(d.LOAD_FAIL,l)};document.addEventListener(d.LOAD,q);document.addEventListener(d.LOAD_FAIL,l)}function x(p){const q=z=>{this._adShowing=!0;self.C3MobileAdvertsAPI.real.suspendRuntime();p&&a(p,"interstitial ad show");document.removeEventListener(d.SHOW,q);document.removeEventListener(d.SHOW_FAIL,
l)},l=z=>{this._adShowing=!1;p&&b(p,"interstitial ad failed to show");document.removeEventListener(d.SHOW,q);document.removeEventListener(d.SHOW_FAIL,l)};document.addEventListener(d.SHOW,q);document.addEventListener(d.SHOW_FAIL,l)}self.C3InterstitialAd=f}"use strict";
{const c=self.C3AdUtils,a=c.Success,b=c.Failure,d={get LOAD(){return self.admob.Events.rewardedLoad},get LOAD_FAIL(){return self.admob.Events.rewardedLoadFail},get SHOW(){return self.admob.Events.rewardedShow},get SHOW_FAIL(){return self.admob.Events.rewardedShowFail},get DISMISS(){return self.admob.Events.rewardedDismiss},get REWARD(){return self.admob.Events.rewardedReward}};class f{constructor(p,q){if(!p)return b(q,"Unit ID not specified");this._adUnitId=p;this._ad=null;this._loadSuccess=this._adShowing=
this._adLoading=!1;this._loadPromiseResolver=null;this._loadPromise=this.GetLoadPromise();this._reward=null}GetLoadPromise(){return this._loadPromise?this._loadPromise:this._loadPromise=new Promise(p=>{this._loadPromiseResolver=p})}ResolveLoadPromise(p){this._loadSuccess=p;this._loadPromiseResolver&&this._loadPromiseResolver(p);this._loadPromiseResolver=this._loadPromise=null;this._loadPromise=this.GetLoadPromise()}Load(p,q){p={adUnitId:c.GetAdUnit(this._adUnitId,"rewarded"),npa:"NON_PERSONALIZED"===
p?"1":"0"};this._adLoading=!0;this._loadSuccess=this._adShowing=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();this._ad=new self.admob.RewardedAd(p);u.call(this,q);this._ad.load()}async Show(p){if(!this._ad)return b(p,"rewarded ad not created");if(this._adShowing)return a(p,"rewarded ad already shown");this._adLoading&&await this.GetLoadPromise();await (async()=>{this._loadSuccess?(x.call(this,p),await this._ad.show()):(u.call(this),this._loadSuccess=!1,this._loadPromise=null,this._ad.load(),
await this.GetLoadPromise(),this._loadSuccess?(x.call(this,p),await this._ad.show()):b(p,"rewarded ad failed to load"))})()}IsLoading(){return this._adLoading}IsShowing(){return this._adShowing}}function u(p){const q=z=>{this._adLoading=!1;this.ResolveLoadPromise(!0);p&&a(p,"rewarded ad load");document.removeEventListener(d.LOAD,q);document.removeEventListener(d.LOAD_FAIL,l)},l=z=>{this._adLoading=!1;this.ResolveLoadPromise(!1);p&&b(p,"rewarded ad failed to load");document.removeEventListener(d.LOAD,
q);document.removeEventListener(d.LOAD_FAIL,l)};document.addEventListener(d.LOAD,q);document.addEventListener(d.LOAD_FAIL,l)}function x(p){const q=A=>{this._adShowing=!0;self.C3MobileAdvertsAPI.real.suspendRuntime()},l=A=>{this._reward=A.reward},z=A=>{this._adShowing=!1;p&&b(p,"rewarded ad failed to show");document.removeEventListener(d.SHOW,q);document.removeEventListener(d.SHOW_FAIL,z);document.removeEventListener(d.REWARD,l);document.removeEventListener(d.DISMISS,C)},C=A=>{if(null!==this._reward){A=
String(this._reward.type);const r=String(this._reward.amount);p&&a(p,JSON.stringify([A,r]))}else p&&b(p,"closed with no reward");this._reward=null;this._adShowing=!1;this._adLoading=!0;this._loadSuccess=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();u.call(this);self.C3MobileAdvertsAPI.real.resumeRuntime();this._ad.load();document.removeEventListener(d.SHOW,q);document.removeEventListener(d.SHOW_FAIL,z);document.removeEventListener(d.REWARD,l);document.removeEventListener(d.DISMISS,
C)};document.addEventListener(d.SHOW,q);document.addEventListener(d.SHOW_FAIL,z);document.addEventListener(d.REWARD,l);document.addEventListener(d.DISMISS,C)}self.C3RewardedAd=f}"use strict";
{const c=self.C3AdUtils,a=c.Success,b=c.Failure,d={get LOAD(){return self.admob.Events.rewardedInterstitialLoad},get LOAD_FAIL(){return self.admob.Events.rewardedInterstitialLoadFail},get SHOW(){return self.admob.Events.rewardedInterstitialShow},get SHOW_FAIL(){return self.admob.Events.rewardedInterstitialShowFail},get DISMISS(){return self.admob.Events.rewardedInterstitialDismiss},get REWARD(){return self.admob.Events.rewardedInterstitialReward}};class f{constructor(p,q){if(!p)return b(q,"Unit ID not specified");
this._adUnitId=p;this._ad=null;this._loadSuccess=this._adShowing=this._adLoading=!1;this._loadPromiseResolver=null;this._loadPromise=this.GetLoadPromise();this._reward=null}GetLoadPromise(){return this._loadPromise?this._loadPromise:this._loadPromise=new Promise(p=>{this._loadPromiseResolver=p})}ResolveLoadPromise(p){this._loadSuccess=p;this._loadPromiseResolver&&this._loadPromiseResolver(p);this._loadPromiseResolver=this._loadPromise=null;this._loadPromise=this.GetLoadPromise()}Load(p,q){p={adUnitId:c.GetAdUnit(this._adUnitId,
"rewardedInterstitial"),npa:"NON_PERSONALIZED"===p?"1":"0"};this._adLoading=!0;this._loadSuccess=this._adShowing=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();this._ad=new self.admob.RewardedInterstitialAd(p);u.call(this,q);this._ad.load()}async Show(p){if(!this._ad)return b(p,"rewarded interstitial ad not created");if(this._adShowing)return a(p,"rewarded interstitial ad already shown");this._adLoading&&await this.GetLoadPromise();await (async()=>{this._loadSuccess?(x.call(this,
p),await this._ad.show()):(u.call(this),this._loadSuccess=!1,this._loadPromise=null,this._ad.load(),await this.GetLoadPromise(),this._loadSuccess?(x.call(this,p),await this._ad.show()):b(p,"rewarded interstitial ad failed to load"))})()}IsLoading(){return this._adLoading}IsShowing(){return this._adShowing}}function u(p){const q=z=>{this._adLoading=!1;this.ResolveLoadPromise(!0);p&&a(p,"rewarded interstitial ad load");document.removeEventListener(d.LOAD,q);document.removeEventListener(d.LOAD_FAIL,
l)},l=z=>{this._adLoading=!1;this.ResolveLoadPromise(!1);p&&b(p,"rewarded interstitial ad failed to load");document.removeEventListener(d.LOAD,q);document.removeEventListener(d.LOAD_FAIL,l)};document.addEventListener(d.LOAD,q);document.addEventListener(d.LOAD_FAIL,l)}function x(p){const q=A=>{this._adShowing=!0;self.C3MobileAdvertsAPI.real.suspendRuntime()},l=A=>{this._reward=A.reward},z=A=>{this._adShowing=!1;p&&b(p,"rewarded interstitial ad failed to show");document.removeEventListener(d.SHOW,q);
document.removeEventListener(d.SHOW_FAIL,z);document.removeEventListener(d.REWARD,l);document.removeEventListener(d.DISMISS,C)},C=A=>{if(null!==this._reward){A=String(this._reward.type);const r=String(this._reward.amount);p&&a(p,JSON.stringify([A,r]))}else p&&b(p,"closed with no reward");this._reward=null;this._adShowing=!1;this._adLoading=!0;this._loadSuccess=!1;this._loadPromise=null;this._loadPromise=this.GetLoadPromise();u.call(this);self.C3MobileAdvertsAPI.real.resumeRuntime();this._ad.load();
document.removeEventListener(d.SHOW,q);document.removeEventListener(d.SHOW_FAIL,z);document.removeEventListener(d.REWARD,l);document.removeEventListener(d.DISMISS,C)};document.addEventListener(d.SHOW,q);document.addEventListener(d.SHOW_FAIL,z);document.addEventListener(d.REWARD,l);document.addEventListener(d.DISMISS,C)}self.C3RewardedInterstitialAd=f}"use strict";
{const c=self.C3AdUtils,a=c.Success,b=c.Failure,d=self.cordova?"ios"===self.cordova.platformId:!1,f=self.cordova?"android"===self.cordova.platformId:!1;class u{constructor(){this._adPersonalization="UNKNOWN";this._inEEAorUnknown="";this._consentStatusIndex=0;this._consentStatusString="UNKNOWN";this._trackingStatusString="not-determined";this._hasConsentForm=!1}async Reset(){c.ConfigurationOptions.debug&&await self.consent.reset()}GetAdPersonalization(){return this._adPersonalization}async RequestTrackingAuthorization(){d&&
await self.admob.requestTrackingAuthorization()}async GetTrackingAuthorizationStatus(){if(f)return this._trackingStatusString="not-determined";const r=self.cordova.plugins.idfa,n=await r.getInfo();if(!n.trackingLimited)return this._trackingStatusString="authorized";switch(n.trackingPermission){case r.TRACKING_PERMISSION_NOT_DETERMINED:return this._trackingStatusString="not-determined";case r.TRACKING_PERMISSION_RESTRICTED:return this._trackingStatusString="denied";case r.TRACKING_PERMISSION_DENIED:return this._trackingStatusString=
"denied";case r.TRACKING_PERMISSION_AUTHORIZED:return this._trackingStatusString="authorized"}}async RequestIDFA(r){if(f)return a(r,"not-determined");if(d)return await z.call(this),"true"===this._inEEAorUnknown?await this.RequestTrackingAuthorization():(await this.GetTrackingAuthorizationStatus(),"not-determined"===this._trackingStatusString&&(await x.call(this),this._hasConsentForm?await this.ShowIDFAMessage():await this.RequestTrackingAuthorization())),await this.GetTrackingAuthorizationStatus(),
a(r,this._trackingStatusString)}async RequestInfoUpdateForTesting(r,n,m){return await A.call(this,r,n,t=>{t?"object"===typeof t?b(m,t.message):b(m,t):b(m,"requestInfoUpdate error")})}async RequestInfoUpdateForTestingSkipErrors(r,n,m){await A.call(this,r,n)}async ShowConsentForm(r,n=!1){await p.call(this);switch(r){case "eu":n=await x.call(this);q.call(this)&&n&&await (await self.consent.loadForm()).show();break;case "always":{r=await x.call(this);const m=await z.call(this);r&&"true"===m?await (await self.consent.loadForm()).show():
r&&n&&await (await self.consent.loadForm()).show()}}await p.call(this);await z.call(this);await l.call(this)}async ShowIDFAMessage(r){await this.ShowConsentForm("always",!0)}async UpdateConsentStatus(){await p.call(this);await z.call(this);await l.call(this)}async SuccessResponse(r){await this.GetTrackingAuthorizationStatus();a(r,`${this._consentStatusString}&&${this._trackingStatusString}&&${this._inEEAorUnknown}`)}async FailureResponse(r,n){b(r,n)}async StatusUpdateSuccessResponse(r){await this.UpdateConsentStatus();
await this.GetTrackingAuthorizationStatus();a(r,`${this._consentStatusString}&&${this._trackingStatusString}&&${this._inEEAorUnknown}`)}}async function x(){return this._hasConsentForm=await self.consent.getFormStatus()===self.consent.FormStatus.Available}async function p(){this._consentStatusIndex=await self.consent.getConsentStatus();switch(this._consentStatusIndex){case 1:return this._consentStatusString="REQUIRED";case 2:return this._consentStatusString="NOT_REQUIRED";case 3:return this._consentStatusString=
"OBTAINED";case 0:return this._consentStatusString="UNKNOWN"}}function q(){switch(this._consentStatusIndex){case 1:return!0;case 2:return!1;case 3:return!1;case 0:return!0}}function l(){switch(this._consentStatusIndex){case 1:return this._adPersonalization="NON_PERSONALIZED";case 2:return this._adPersonalization="PERSONALIZED";case 3:return this._adPersonalization="PERSONALIZED";case 0:return this._adPersonalization="NON_PERSONALIZED"}}async function z(){if(f)switch(this._consentStatusIndex){case 1:return this._inEEAorUnknown=
"true";case 2:return this._inEEAorUnknown="false";case 3:return this._inEEAorUnknown="true";case 0:return this._inEEAorUnknown="true"}if(d)return await C.call(this,"IABTCF_gdprApplies","getInt")?this._inEEAorUnknown="true":this._inEEAorUnknown="false"}async function C(r,n){return new Promise((m,t)=>{self.NativeStorage[n](r,w=>m(w),w=>m(1))})}async function A(r,n,m){let t="",w=null;if(r){switch(n){case "EEA":t=self.consent.DebugGeography.EEA;break;case "NOT_EEA":t=self.consent.DebugGeography.NotEEA;
break;default:t=self.consent.DebugGeography.Disabled}w=[await c.TestId]}try{return r?await self.consent.requestInfoUpdate({debugGeography:t,testDeviceIds:w}):await self.consent.requestInfoUpdate(),!0}catch(y){return m&&m(y),!1}}self.C3Consent=new u}"use strict";
{const c=(r,n)=>{let m=r[0],t=r[1],w=r[2],y=r[3];m=b(m,t,w,y,n[0],7,-680876936);y=b(y,m,t,w,n[1],12,-389564586);w=b(w,y,m,t,n[2],17,606105819);t=b(t,w,y,m,n[3],22,-1044525330);m=b(m,t,w,y,n[4],7,-176418897);y=b(y,m,t,w,n[5],12,1200080426);w=b(w,y,m,t,n[6],17,-1473231341);t=b(t,w,y,m,n[7],22,-45705983);m=b(m,t,w,y,n[8],7,1770035416);y=b(y,m,t,w,n[9],12,-1958414417);w=b(w,y,m,t,n[10],17,-42063);t=b(t,w,y,m,n[11],22,-1990404162);m=b(m,t,w,y,n[12],7,1804603682);y=b(y,m,t,w,n[13],12,-40341101);w=b(w,y,
m,t,n[14],17,-1502002290);t=b(t,w,y,m,n[15],22,1236535329);m=d(m,t,w,y,n[1],5,-165796510);y=d(y,m,t,w,n[6],9,-1069501632);w=d(w,y,m,t,n[11],14,643717713);t=d(t,w,y,m,n[0],20,-373897302);m=d(m,t,w,y,n[5],5,-701558691);y=d(y,m,t,w,n[10],9,38016083);w=d(w,y,m,t,n[15],14,-660478335);t=d(t,w,y,m,n[4],20,-405537848);m=d(m,t,w,y,n[9],5,568446438);y=d(y,m,t,w,n[14],9,-1019803690);w=d(w,y,m,t,n[3],14,-187363961);t=d(t,w,y,m,n[8],20,1163531501);m=d(m,t,w,y,n[13],5,-1444681467);y=d(y,m,t,w,n[2],9,-51403784);
w=d(w,y,m,t,n[7],14,1735328473);t=d(t,w,y,m,n[12],20,-1926607734);m=f(m,t,w,y,n[5],4,-378558);y=f(y,m,t,w,n[8],11,-2022574463);w=f(w,y,m,t,n[11],16,1839030562);t=f(t,w,y,m,n[14],23,-35309556);m=f(m,t,w,y,n[1],4,-1530992060);y=f(y,m,t,w,n[4],11,1272893353);w=f(w,y,m,t,n[7],16,-155497632);t=f(t,w,y,m,n[10],23,-1094730640);m=f(m,t,w,y,n[13],4,681279174);y=f(y,m,t,w,n[0],11,-358537222);w=f(w,y,m,t,n[3],16,-722521979);t=f(t,w,y,m,n[6],23,76029189);m=f(m,t,w,y,n[9],4,-640364487);y=f(y,m,t,w,n[12],11,-421815835);
w=f(w,y,m,t,n[15],16,530742520);t=f(t,w,y,m,n[2],23,-995338651);m=u(m,t,w,y,n[0],6,-198630844);y=u(y,m,t,w,n[7],10,1126891415);w=u(w,y,m,t,n[14],15,-1416354905);t=u(t,w,y,m,n[5],21,-57434055);m=u(m,t,w,y,n[12],6,1700485571);y=u(y,m,t,w,n[3],10,-1894986606);w=u(w,y,m,t,n[10],15,-1051523);t=u(t,w,y,m,n[1],21,-2054922799);m=u(m,t,w,y,n[8],6,1873313359);y=u(y,m,t,w,n[15],10,-30611744);w=u(w,y,m,t,n[6],15,-1560198380);t=u(t,w,y,m,n[13],21,1309151649);m=u(m,t,w,y,n[4],6,-145523070);y=u(y,m,t,w,n[11],10,
-1120210379);w=u(w,y,m,t,n[2],15,718787259);t=u(t,w,y,m,n[9],21,-343485551);r[0]=A(m,r[0]);r[1]=A(t,r[1]);r[2]=A(w,r[2]);r[3]=A(y,r[3])},a=(r,n,m,t,w,y)=>{n=A(A(n,r),A(t,y));return A(n<<w|n>>>32-w,m)},b=(r,n,m,t,w,y,G)=>a(n&m|~n&t,r,n,w,y,G),d=(r,n,m,t,w,y,G)=>a(n&t|m&~t,r,n,w,y,G),f=(r,n,m,t,w,y,G)=>a(n^m^t,r,n,w,y,G),u=(r,n,m,t,w,y,G)=>a(m^(n|~t),r,n,w,y,G),x=r=>{const n=r.length,m=[1732584193,-271733879,-1732584194,271733878];let t;for(t=64;t<=r.length;t+=64)c(m,p(r.substring(t-64,t)));r=r.substring(t-
64);const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)w[t>>2]|=r.charCodeAt(t)<<(t%4<<3);w[t>>2]|=128<<(t%4<<3);if(55<t)for(c(m,w),t=0;16>t;t++)w[t]=0;w[14]=8*n;c(m,w);return m},p=r=>{const n=[];for(let m=0;64>m;m+=4)n[m>>2]=r.charCodeAt(m)+(r.charCodeAt(m+1)<<8)+(r.charCodeAt(m+2)<<16)+(r.charCodeAt(m+3)<<24);return n},q="0123456789abcdef".split(""),l=r=>{let n="";for(let m=0;4>m;m++)n+=q[r>>8*m+4&15]+q[r>>8*m&15];return n},z=r=>{for(let n=0;n<r.length;n++)r[n]=l(r[n]);return r.join("")},
C=r=>z(x(r));let A=(r,n)=>r+n&4294967295;C("hello");self.C3AdUtilsMD5=C}"use strict";
{const c=self.C3AdUtils,a=self.C3Consent,b=self.C3BannerAd,d=self.C3InterstitialAd,f=self.C3RewardedAd,u=self.C3RewardedInterstitialAd;let x=null,p=null,q=null,l=null,z=null;const C={},A=(r,n)=>{C[r]=n};A("CreateBannerAdvert",async(r,n,m,t,w)=>{await c.StartAdmobPlus(w,m)&&(m=await a.GetAdPersonalization(),x||(x=new b(r,n,t,w)),x.Load(m,w))});A("ShowBannerAdvert",async r=>{if(!x)return c.Failure(r,"banner ad not created");x.Show(r)});A("HideBannerAdvert",async r=>{if(!x)return c.Failure(r,"banner ad not created");
x.Hide(r)});A("CreateInterstitialAdvert",async(r,n,m)=>{if(p)return c.Success(m,"interstitial ad already created");await c.StartAdmobPlus(m,n)&&(n=await a.GetAdPersonalization(),p=new d(r,m),p.Load(n,m))});A("ShowInterstitialAdvert",async r=>{if(!p)return c.Failure(r,"interstitial ad not created");p.Show(r)});A("CreateVideoAdvert",async(r,n,m)=>{if(q||l)return c.Success(m,"video ad already created");await c.StartAdmobPlus(m,n)&&(n=await a.GetAdPersonalization(),q=new f(r,m),q.Load(n,m))});A("ShowVideoAdvert",
async r=>{if(!q)return c.Failure(r,"video ad not created");q.Show(r)});A("CreateRewardedAdvert",async(r,n,m)=>{if(l||q)return c.Success(m,"rewarded ad already created");await c.StartAdmobPlus(m,n)&&(n=await a.GetAdPersonalization(),l=new f(r,m),l.Load(n,m))});A("ShowRewardedAdvert",async r=>{if(!l)return c.Failure(r,"rewarded ad not created");l.Show(r)});A("CreateRewardedInterstitialAdvert",async(r,n,m)=>{if(z)return c.Success(m,"rewarded interstitial ad already created");await c.StartAdmobPlus(m,
n)&&(n=await a.GetAdPersonalization(),z=new u(r,m),z.Load(n,m))});A("ShowRewardedInterstitialAdvert",async r=>{if(!z)return c.Failure(r,"rewarded interstitial ad not created");z.Show(r)});A("Configure",async(r,n,m,t,w,y,G,g,h)=>{const e=!c.HasInitConfigurationOptions();c.SetInitConfigureOptions(r,n,m,t,w,y,G);if(!await c.StartAdmobPlus(h,y))return a.FailureResponse(h,"failure to initialize");e&&await a.Reset();if(!await a.RequestInfoUpdateForTesting(y,G,h))return a.FailureResponse(h,"failure to update consent information");
e?g?await a.ShowConsentForm("eu"):await a.UpdateConsentStatus():await a.ShowConsentForm("always");await a.SuccessResponse(h)});A("RequestConsent",async r=>{C.Configure(c.ConfigurationOptions.id,c.ConfigurationOptions.pubID,c.ConfigurationOptions.privacyPolicy,c.ConfigurationOptions.showFree,"always",c.ConfigurationOptions.debug,c.ConfigurationOptions.debugLocation,!1,r)});A("SetMaxAdContentRating",async(r,n)=>{if(await c.StartAdmobPlus(n)){if(!r)return c.Failure(n,"Label not specified");try{c.UpdateAdmobPlusRequest("maxAdContentRating",
r),c.Success(n,"")}catch(m){c.Failure(n,"invalid label")}}});A("TagForChildDirectedTreatment",async(r,n)=>{if(await c.StartAdmobPlus(n))try{c.UpdateAdmobPlusRequest("tagForChildDirectedTreatment",1===r?!0:!1),c.Success(n,"")}catch(m){c.Failure(n,"invalid label")}});A("TagForUnderAgeOfConsent",async(r,n)=>{if(await c.StartAdmobPlus(n))try{c.UpdateAdmobPlusRequest("tagForUnderAgeOfConsent",1===r?!0:!1),c.Success(n,"")}catch(m){c.Failure(n,"invalid label")}});A("RequestIDFA",async r=>{await c.StartAdmobPlus(r)&&
a.RequestIDFA(r)});A("StatusUpdate",async(r,n,m)=>{if(!await c.StartAdmobPlus(m,r))return a.FailureResponse(m,"failure to initialize");await a.RequestInfoUpdateForTestingSkipErrors(r,n,m);await a.StatusUpdateSuccessResponse(m)});self.C3MobileAdvertsAPI||(self.C3MobileAdvertsAPI={});self.C3MobileAdvertsAPI.real=C}"use strict";
{const c={},a=(l,z)=>c[l]=z,b=l=>new Promise(z=>setTimeout(z,l));let d=null,f=null,u=null,x=null,p=null;function q(l,z){const C=z.slice(0,-1);z=z[z.length-1];console.log(l,C);return[C,z]}a("CreateBannerAdvert",async(...l)=>{[,l]=q("CreateBannerAdvert",l);await b(50);d?l("Banner already exists"):(d="ready",l(null,"Created banner"))});a("ShowBannerAdvert",async(...l)=>{[,l]=q("ShowBannerAdvert",l);await b(50);"ready"!=d?l("Banner cannot be shown"):(d="shown",l(null,"Showed banner"))});a("HideBannerAdvert",
async(...l)=>{[,l]=q("HideBannerAdvert",l);await b(50);"shown"!=d?l("Banner cannot be hidden"):(d=null,l(null,"Hid banner"))});a("CreateInterstitialAdvert",async(...l)=>{[,l]=q("CreateInterstitialAdvert",l);await b(50);f?l("Intersitial already exists"):(f="ready",l(null,"Created interstitial"))});a("ShowInterstitialAdvert",async(...l)=>{[,l]=q("ShowInterstitialAdvert",l);await b(50);"ready"!=f?l("Cannot show interstitial"):(f=null,l(null,"Interstitial shown"))});a("CreateVideoAdvert",async(...l)=>
{[,l]=q("CreateVideoAdvert",l);await b(50);u?l("Video already exists"):(u="ready",l(null,"Created video"))});a("ShowVideoAdvert",async(...l)=>{[,l]=q("ShowVideoAdvert",l);await b(50);"ready"!=u?l("Cannot show video"):(u=null,l(null,'["example type", 20]'))});a("CreateRewardedAdvert",async(...l)=>{[,l]=q("CreateRewardedAdvert",l);await b(50);x?l("Rewarded already exists"):(x="ready",l(null,"Created rewarded"))});a("ShowRewardedAdvert",async(...l)=>{[,l]=q("ShowRewardedAdvert",l);await b(50);"ready"!=
x?l("Cannot show rewarded"):(x=null,l(null,'["example type", 20]'))});a("CreateRewardedInterstitialAdvert",async(...l)=>{[,l]=q("CreateRewardedInterstitialAdvert",l);await b(50);p?l("Rewarded intersitial already exists"):(p="ready",l(null,"Created rewarded interstitial"))});a("ShowRewardedInterstitialAdvert",async(...l)=>{[,l]=q("ShowRewardedInterstitialAdvert",l);await b(50);"ready"!=p?l("Cannot show rewarded interstitial"):(p=null,l(null,"Rewarded interstitial shown"))});a("Configure",async(...l)=>
{[,l]=q("Configure",l);await b(50);l(null,"PERSONALIZED&&true")});a("RequestConsent",async(...l)=>{[,l]=q("RequestConsent",l);await b(50);l(null,"PERSONALIZED&&true")});a("RequestIDFA",async(...l)=>{[,l]=q("RequestIDFA",l);await b(50);l(null,"authorized")});self.C3MobileAdvertsAPI||(self.C3MobileAdvertsAPI={});self.C3MobileAdvertsAPI.fake=c}"use strict";
{const c=self.C3AdUtils,a={},b=(q,l)=>{a[q]=l};let d=!1,f=null;const u=async q=>{if(!a.webAdsScriptLoaded)return c.Failure(q,"advert script not loaded, likely blocked by an ad blocker"),!1;d||(self.adsbygoogle=self.adsbygoogle||[],self.adBreak=self.adConfig=l=>self.adsbygoogle.push(l),d=!0);return f?f:f=new Promise((l,z)=>{self.adConfig({preloadAdBreaks:"on",onReady:()=>l(!0)})})},x=()=>{a.suspendRuntime&&a.suspendRuntime()},p=()=>{a.resumeRuntime&&a.resumeRuntime()};b("CreateBannerAdvert",async(q,
l,z,C,A)=>{c.Failure(A,"banner ads not supported in web platform")});b("ShowBannerAdvert",async q=>{c.Failure(q,"banner ads not supported in web platform")});b("HideBannerAdvert",async q=>{c.Failure(q,"banner ads not supported in web platform")});b("CreateInterstitialAdvert",async(q,l,z)=>{await u(z)&&c.Success(z,"interstitial ad created")});b("ShowInterstitialAdvert",async q=>{await u(q)&&self.adBreak({type:"next",beforeAd:()=>x(),afterAd:()=>p(),adBreakDone:l=>{switch(l.breakStatus){case "viewed":case "dismissed":c.Success(q,
"interstitial ad show");break;default:console.table(l),c.Failure(q,"interstitial ad failed to show")}}})});b("CreateVideoAdvert",async(q,l,z)=>{c.Failure(z,"video ads are deprecated")});b("ShowVideoAdvert",async q=>{c.Failure(q,"video ads are deprecated")});b("CreateRewardedAdvert",async(q,l,z)=>{await u(z)&&c.Success(z,"rewarded ad created")});b("ShowRewardedAdvert",async q=>{await u(q)&&self.adBreak({type:"reward",beforeAd:()=>x(),afterAd:()=>p(),adBreakDone:l=>{switch(l.breakStatus){case "viewed":case "dismissed":c.Success(q,
"rewarded ad show");break;case "ignored":c.Failure(q,"rewarded ad ignored");break;default:console.table(l),c.Failure(q,"rewarded ad failed to show")}},beforeReward:l=>{l()},adDismissed:()=>{c.Failure(q,"closed with no reward")},adViewed:()=>{c.Success(q,JSON.stringify(["Reward",1]))}})});b("CreateRewardedInterstitialAdvert",async(q,l,z)=>{await u(z)&&c.Success(z,"rewarded interstitial ad created")});b("ShowRewardedInterstitialAdvert",async q=>{await u(q)&&self.adBreak({type:"reward",beforeAd:()=>
x(),afterAd:()=>p(),adBreakDone:l=>{switch(l.breakStatus){case "viewed":case "dismissed":c.Success(q,"rewarded interstitial ad show");break;case "ignored":c.Failure(q,"rewarded interstitial ad ignored");break;default:console.table(l),c.Failure(q,"rewarded interstitial ad failed to show")}},beforeReward:l=>{l()},adDismissed:()=>{c.Failure(q,"closed with no reward")},adViewed:()=>{c.Success(q,JSON.stringify(["Reward",1]))}})});b("Configure",async(q,l,z,C,A,r,n,m,t)=>{a.webAdsScriptLoaded?c.Success(t,
"UNKNOWN&&not-determined&&true"):c.Failure(t,"advert script not loaded, likely blocked by an ad blocker")});b("RequestConsent",async q=>{c.Success(q,"UNKNOWN&&not-determined&&true")});b("SetMaxAdContentRating",async(q,l)=>{c.Failure(l,"setting max ad content rating not supported in web platform")});b("TagForChildDirectedTreatment",async(q,l)=>{c.Failure(l,"tagging for children not supported in web platform")});b("TagForUnderAgeOfConsent",async(q,l)=>{c.Failure(l,"tagging for under age of consent not supported in web platform")});
b("RequestIDFA",async q=>{c.Success(q,"not-determined")});b("StatusUpdate",async(q,l,z)=>{c.Success(z,"UNKNOWN&&not-determined&&true")});self.C3MobileAdvertsAPI||(self.C3MobileAdvertsAPI={});self.C3MobileAdvertsAPI.web=a}"use strict";
{let c=!1;self.RuntimeInterface.AddDOMHandlerClass(class extends self.DOMHandler{constructor(a){super(a,"advert");a=b=>[b,d=>this._CallMethod(b,d)];this.AddRuntimeMessageHandlers([a("CreateBannerAdvert"),a("ShowBannerAdvert"),a("HideBannerAdvert"),a("CreateInterstitialAdvert"),a("ShowInterstitialAdvert"),a("CreateVideoAdvert"),a("ShowVideoAdvert"),a("CreateRewardedAdvert"),a("ShowRewardedAdvert"),a("CreateRewardedInterstitialAdvert"),a("ShowRewardedInterstitialAdvert"),a("Configure"),a("RequestConsent"),
a("SetUserPersonalisation"),a("SetMaxAdContentRating"),a("TagForChildDirectedTreatment"),a("TagForUnderAgeOfConsent"),a("RequestIDFA"),a("StatusUpdate"),(b=>[b,d=>this._AddScript(d[0],d[1])])("AddScript")])}_GetApi(){if(self.cordova)return self.C3MobileAdvertsAPI.real;if(!self.cordova)return self.C3MobileAdvertsAPI.web}_SuspendRuntime(){this.GetRuntimeInterface().PostToRuntimeComponent("runtime","visibilitychange",{hidden:!0})}_ResumeRuntime(){this.GetRuntimeInterface().PostToRuntimeComponent("runtime",
"visibilitychange",{hidden:!1})}async _CallMethod(a,b){const d=this._GetApi();d.suspendRuntime||(d.suspendRuntime=()=>this._SuspendRuntime());d.resumeRuntime||(d.resumeRuntime=()=>this._ResumeRuntime());if(!d)throw c||(c=!0,console.warn("The Mobile Advert plugin is not loaded. Please note that it only works in Android or iOS exports")),Error("advert plugin not loaded");return new Promise((f,u)=>{(0,d[a])(...b,(x,p)=>{x?u(x):f(p)})})}async _AddScript(a,b=null){const d=this._GetApi();d.webAdsScriptLoaded=
!1;return new Promise((f,u)=>{u=document.createElement("script");if(b)for(let x in b)u.setAttribute(x,b[x]);u.onload=function(){d.webAdsScriptLoaded=!0;f()};u.onerror=function(x){d.webAdsScriptLoaded=!1;f()};u.src=a;document.head.appendChild(u)})}})}"use strict";
{function c(b){b.stopPropagation()}function a(b){13!==b.which&&27!==b.which&&b.stopPropagation()}self.RuntimeInterface.AddDOMHandlerClass(class extends self.DOMElementHandler{constructor(b){super(b,"text-input");this.AddDOMElementMessageHandler("scroll-to-bottom",d=>this._OnScrollToBottom(d))}CreateElement(b,d){let f;const u=d.type;"textarea"===u?(f=document.createElement("textarea"),f.style.resize="none"):(f=document.createElement("input"),f.type=u);f.style.position="absolute";f.autocomplete="off";
f.addEventListener("pointerdown",c);f.addEventListener("pointermove",c);f.addEventListener("pointerrawupdate",c);f.addEventListener("pointerup",c);f.addEventListener("mousedown",c);f.addEventListener("mouseup",c);f.addEventListener("keydown",a);f.addEventListener("keyup",a);f.addEventListener("click",x=>{x.stopPropagation();this._PostToRuntimeElementMaybeSync("click",b)});f.addEventListener("dblclick",x=>{x.stopPropagation();this._PostToRuntimeElementMaybeSync("dblclick",b)});f.addEventListener("input",
()=>this.PostToRuntimeElement("change",b,{text:f.value}));d.id&&(f.id=d.id);d.className&&(f.className=d.className);this.UpdateState(f,d);return f}UpdateState(b,d){b.value=d.text;b.placeholder=d.placeholder;b.title=d.title;b.disabled=!d.isEnabled;b.readOnly=d.isReadOnly;b.spellcheck=d.spellCheck;d=d.maxLength;0>d?b.removeAttribute("maxlength"):b.setAttribute("maxlength",d)}_OnScrollToBottom(b){b.scrollTop=b.scrollHeight}})}"use strict";
{function c(a){a.stopPropagation()}self.RuntimeInterface.AddDOMHandlerClass(class extends self.DOMElementHandler{constructor(a){super(a,"button")}CreateElement(a,b){const d=document.createElement("input");var f=d;b.isCheckbox?(d.type="checkbox",f=document.createElement("label"),f.appendChild(d),f.appendChild(document.createTextNode("")),f.style.fontFamily="sans-serif",f.style.userSelect="none",f.style.webkitUserSelect="none",f.style.display="inline-block",f.style.color="black"):d.type="button";f.style.position=
"absolute";f.addEventListener("pointerdown",c);f.addEventListener("pointermove",c);f.addEventListener("pointerrawupdate",c);f.addEventListener("pointerup",c);f.addEventListener("mousedown",c);f.addEventListener("mouseup",c);f.addEventListener("keydown",c);f.addEventListener("keyup",c);d.addEventListener("click",()=>this._PostToRuntimeElementMaybeSync("click",a,{isChecked:d.checked}));b.id&&(d.id=b.id);b.className&&(d.className=b.className);this.UpdateState(f,b);return f}_GetInputElem(a){return"input"===
a.tagName.toLowerCase()?a:a.firstChild}_GetFocusElement(a){return this._GetInputElem(a)}UpdateState(a,b){const d=this._GetInputElem(a);d.checked=b.isChecked;d.disabled=!b.isEnabled;a.title=b.title;a===d?d.value=b.text:a.lastChild.textContent=b.text}})};
